### YamlMime:PowershellCmdlet
summary: |-
  Creates a new Firewall in a resource group.
module: Az.Network
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewallApplicationRuleCollection" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewallNatRuleCollection" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewallNetworkRuleCollection" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  description: ""
- name: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewall" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzFirewall
  href: ./Get-AzFirewall.yml
- text: Remove-AzFirewall
  href: ./Remove-AzFirewall.yml
- text: Set-AzFirewall
  href: ./Set-AzFirewall.yml
- text: New-AzFirewallApplicationRuleCollection
  href: ./New-AzFirewallApplicationRuleCollection.yml
- text: New-AzFirewallNatRuleCollection
  href: ./New-AzFirewallNatRuleCollection.yml
- text: New-AzFirewallNetworkRuleCollection
  href: ./New-AzFirewallNetworkRuleCollection.yml
syntaxes:
- >-
  New-AzFirewall -Name <String> -ResourceGroupName <String> -Location <String>

   [-ApplicationRuleCollection <PSAzureFirewallApplicationRuleCollection[]>]

   [-NatRuleCollection <PSAzureFirewallNatRuleCollection[]>]

   [-NetworkRuleCollection <PSAzureFirewallNetworkRuleCollection[]>] [-Tag <Hashtable>] [-Force] [-AsJob]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzFirewall -Name <String> -ResourceGroupName <String> -Location <String> -VirtualNetworkName <String>

   -PublicIpName <String> [-ApplicationRuleCollection <PSAzureFirewallApplicationRuleCollection[]>]

   [-NatRuleCollection <PSAzureFirewallNatRuleCollection[]>]

   [-NetworkRuleCollection <PSAzureFirewallNetworkRuleCollection[]>] [-Tag <Hashtable>] [-Force] [-AsJob]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
examples:
- title: '1:  Create a Firewall attached to a virtual network'
  code: |-
    New-AzFirewall -Name "azFw" -ResourceGroupName "rg" -Location centralus -VirtualNetworkName "vnet" -PublicIpName "pip-name"
  description: |-
    This example creates a Firewall attached to virtual network "vnet" in the same resource group as the firewall.
    Since no rules were specified, the firewall will block all traffic (default behavior).
    Threat Intel will also run in default mode - Alert - which means malicious traffic will be logged, but not denied.
  summary: ""
- title: '2:  Create a Firewall which allows all HTTPS traffic'
  code: |-
    $rule = New-AzFirewallApplicationRule -Name R1 -Protocol "https:443" -TargetFqdn "*" 
    $ruleCollection = New-AzFirewallApplicationRuleCollection -Name RC1 -Priority 100 -Rule $rule -ActionType "Allow"
    New-AzFirewall -Name "azFw" -ResourceGroupName "rg" -Location centralus -VirtualNetworkName "vnet" -PublicIpName "pip-name" -ApplicationRuleCollection $ruleCollection
  description: |-
    This example creates a Firewall which allows all HTTPS traffic on port 443.
    Threat Intel will run in default mode - Alert - which means malicious traffic will be logged, but not denied.
  summary: ""
- title: '3:  DNAT - redirect traffic destined to 10.1.2.3:80 to 10.2.3.4:8080'
  code: |-
    $rule = New-AzFirewallNatRule -Name "natRule" -Protocol "TCP" -SourceAddress "*" -DestinationAddress "10.1.2.3" -DestinationPort "80" -TranslatedAddress "10.2.3.4" -TranslatedPort "8080"
    $ruleCollection = New-AzFirewallNatRuleCollection -Name "NatRuleCollection" -Priority 1000 -Rule $rule
    New-AzFirewall -Name "azFw" -ResourceGroupName "rg" -Location centralus -NatRuleCollection $ruleCollection -ThreatIntelMode Off
  description: |-
    This example created a Firewall which translated the destination IP and port of all packets destined to 10.1.2.3:80 to 10.2.3.4:8080
    Threat Intel is turned off in this example.
  summary: ""
- title: '4:  Create a Firewall with no rules and with Threat Intel in Alert mode'
  code: |-
    New-AzFirewall -Name "azFw" -ResourceGroupName "rg" -Location centralus -VirtualNetworkName "vnet" -PublicIpName "pip-name" -ThreatIntelMode Alert
  description: |-
    This example creates a Firewall which blocks all traffic (default behavior) and has Threat Intel running in Alert mode.
    This means alerting logs are emitted for malicious traffic before applying the other rules (in this case just the default rule - Deny All)
  summary: ""
- title: '5:  Create a Firewall which allows all HTTP traffic on port 8080, but blocks malicious domains identified by Threat Intel'
  code: |-
    $rule = New-AzFirewallApplicationRule -Name R1 -Protocol "http:8080" -TargetFqdn "*" 
    $ruleCollection = New-AzFirewallApplicationRuleCollection -Name RC1 -Priority 100 -Rule $rule -ActionType "Allow"
    New-AzFirewall -Name "azFw" -ResourceGroupName "rg" -Location centralus -VirtualNetworkName "vnet" -PublicIpName "pip-name" -ApplicationRuleCollection $ruleCollection -ThreatIntelMode Deny
  description: |-
    This example creates a Firewall which allows all HTTP traffic on port 8080 unless it is considered malicious by Threat Intel.
    When running in Deny mode, unlike Alert, traffic considered malicious by Threat Intel is not just logged, but also blocked.
  summary: ""
parameters:
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewallApplicationRuleCollection" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: ApplicationRuleCollection
  description: |+
    Specifies the collections of application rules for the new Firewall.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Run cmdlet in the background

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: "False"
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Force
  description: |+
    Forces the command to run without asking for user confirmation.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Location
  isRequired: true
  description: |+
    Specifies the region for the Firewall.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Specifies the name of the Azure Firewall that this cmdlet creates.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ResourceName
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewallNatRuleCollection" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: NatRuleCollection
  description: |+
    The list of AzureFirewallNatRuleCollections

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSAzureFirewallNetworkRuleCollection" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: NetworkRuleCollection
  description: |+
    The list of AzureFirewallNetworkRuleCollections

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: PublicIpName
  isRequired: true
  description: |+
    Public Ip Name. The Public IP must use Standard SKU and must belong to the same resource group as the Firewall.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    Specifies the name of a resource group to contain the Firewall.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  name: Tag
  description: |+
    Key-value pairs in the form of a hash table. For example:

    @{key0="value0";key1=$null;key2="value2"}

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ThreatIntelMode
  description: |+
    Specifies the operation mode for Threat Intelligence. Default mode is Alert, not Off.

  defaultValue: Alert
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: VirtualNetworkName
  isRequired: true
  description: |+
    Specifies the name of the virtual network for which the Firewall will be deployed. Virtual network and Firewall must belong to the same resource group.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: "False"
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.Network.New-AzFirewall
name: New-AzFirewall
description: |-
  The **New-AzFirewall** cmdlet creates an Azure Firewall.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Network.dll-Help.xml
  Module Name: Az.Network
  ms.assetid: A3D60CF1-2E66-4EE5-9C68-932DD8DF80BD
  online version: https://docs.microsoft.com/en-us/powershell/module/az.network/new-azfirewall
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Network/Network/help/New-AzFirewall.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Network/Network/help/New-AzFirewall.md
