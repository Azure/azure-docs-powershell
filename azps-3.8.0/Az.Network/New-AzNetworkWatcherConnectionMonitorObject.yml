### YamlMime:PowershellCmdlet
summary: |-
  Create a connection monitor V2 object.
module: Az.Network
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkWatcherConnectionMonitorObject" data-throw-if-not-resolved="False" />
  description: ""
syntaxes:
- >-
  New-AzNetworkWatcherConnectionMonitorObject -NetworkWatcher <PSNetworkWatcher> -Name <String>

   [-TestGroup <PSNetworkWatcherConnectionMonitorTestGroupObject[]>]

   [-Output <PSNetworkWatcherConnectionMonitorOutputObject[]>] [-Note <String>] [-Tag <Hashtable>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzNetworkWatcherConnectionMonitorObject -NetworkWatcherName <String> -ResourceGroupName <String>

   -Name <String> [-TestGroup <PSNetworkWatcherConnectionMonitorTestGroupObject[]>]

   [-Output <PSNetworkWatcherConnectionMonitorOutputObject[]>] [-Note <String>] [-Tag <Hashtable>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzNetworkWatcherConnectionMonitorObject -Location <String> -Name <String>

   [-TestGroup <PSNetworkWatcherConnectionMonitorTestGroupObject[]>]

   [-Output <PSNetworkWatcherConnectionMonitorOutputObject[]>] [-Note <String>] [-Tag <Hashtable>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
examples:
- title: Example 1
  code: |-
    PS> $cmtest = New-AzNetworkWatcherConnectionMonitorObject -Location westcentralus -Name cmV2test -TestGroup $testGroup1, $testGroup2 -Tag @{"name" = "value"}
    PS> $cmtest
  description: |-
    NetworkWatcherName : NetworkWatcher_westcentralus
    ResourceGroupName  : NetworkWatcherRG
    Name               : cmV2test
    TestGroups         : [
                           {
                             "Name": "testGroup1",
                             "Disable": false,
                             "TestConfigurations": [
                               {
                                 "Name": "tcpTC",
                                 "TestFrequencySec": 60,
                                 "ProtocolConfiguration": {
                                   "Port": 80,
                                   "DisableTraceRoute": false
                                 },
                                 "SuccessThreshold": {
                                   "ChecksFailedPercent": 20,
                                   "RoundTripTimeMs": 5
                                 }
                               },
                               {
                                 "Name": "icmpTC",
                                 "TestFrequencySec": 30,
                                 "PreferredIPVersion": "IPv4",
                                 "ProtocolConfiguration": {
                                   "DisableTraceRoute": true
                                 }
                               }
                             ],
                             "Sources": [
                               {
                                 "Name": "MultiTierApp0(IrinaRGWestcentralus)",
                                 "ResourceId": "/subscriptions/00000000-0000-0000-0000-00000000/resourceGroups/RGW
                         estcentralus/providers/Microsoft.Compute/virtualMachines/MultiTierApp0"
                               },
                               {
                                 "Name": "NPM-CommonEUS(er-lab)",
                                 "ResourceId": "/subscriptions/00000000-0000-0000-0000-00000000/resourceGroups/er-lab/p
                         roviders/Microsoft.OperationalInsights/workspaces/NPM-CommonEUS",
                                 "Filter": {
                                   "Type": "Include",
                                   "Items": [
                                     {
                                       "Type": "AgentAddress",
                                       "Address": "SEA-Cust50-VM01"
                                     },
                                     {
                                       "Type": "AgentAddress",
                                       "Address": "WIN-P0HGNDO2S1B"
                                     }
                                   ]
                                 }
                               }
                             ],
                             "Destinations": [
                               {
                                 "Name": "bingEndpoint",
                                 "Address": "bing.com"
                               },
                               {
                                 "Name": "googleEndpoint",
                                 "Address": "google.com"
                               }
                             ]
                           },
                           {
                             "Name": "testGroup2",
                             "Disable": false,
                             "TestConfigurations": [
                               {
                                 "Name": "httpTC",
                                 "TestFrequencySec": 120,
                                 "ProtocolConfiguration": {
                                   "Port": 443,
                                   "Method": "GET",
                                   "RequestHeaders": [
                                     {
                                       "Name": "Allow",
                                       "Value": "GET"
                                     }
                                   ],
                                   "ValidStatusCodeRanges": [
                                     "2xx",
                                     "300-308"
                                   ],
                                   "PreferHTTPS": true
                                 },
                                 "SuccessThreshold": {
                                   "ChecksFailedPercent": 20,
                                   "RoundTripTimeMs": 30
                                 }
                               }
                             ],
                             "Sources": [
                               {
                                 "Name": "MultiTierApp0(IrinaRGWestcentralus)",
                                 "ResourceId": "/subscriptions/00000000-0000-0000-0000-00000000/resourceGroups/IrinaRGW
                         estcentralus/providers/Microsoft.Compute/virtualMachines/MultiTierApp0"
                               }
                             ],
                             "Destinations": [
                               {
                                 "Name": "googleEndpoint",
                                 "Address": "google.com"
                               }
                             ]
                           }
                         ]
    Outputs            : null
    Notes              :
    Tags               : {
                           "name": "value"
                         }
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: None
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Location
  isRequired: true
  description: |+
    Location of the network watcher.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    The connection monitor name.

  defaultValue: None
  position: Named
  aliases: ConnectionMonitorName
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkWatcher" data-throw-if-not-resolved="False" />
  name: NetworkWatcher
  isRequired: true
  description: |+
    The network watcher resource.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: NetworkWatcherName
  isRequired: true
  description: |+
    The name of network watcher.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Note
  description: |+
    Notes associated with connection monitor.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkWatcherConnectionMonitorOutputObject" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: Output
  description: |+
    Describes a connection monitor output destinations.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    The name of the network watcher resource group.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  name: Tag
  description: |+
    A hashtable which represents resource tags.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkWatcherConnectionMonitorTestGroupObject" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: TestGroup
  description: |+
    The list of test groups.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: None
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.Network.New-AzNetworkWatcherConnectionMonitorObject
name: New-AzNetworkWatcherConnectionMonitorObject
description: |-
  The New-AzNetworkWatcherConnectionMonitorObject cmdlet creates a connection monitor V2 object.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Network.dll-Help.xml
  Module Name: Az.Network
  online version: https://docs.microsoft.com/en-us/powershell/module/az.network/new-aznetworkwatcherconnectionmonitorobject
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Network/Network/help/New-AzNetworkWatcherConnectionMonitorObject.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Network/Network/help/New-AzNetworkWatcherConnectionMonitorObject.md
