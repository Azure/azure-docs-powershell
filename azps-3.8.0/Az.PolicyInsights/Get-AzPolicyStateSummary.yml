### YamlMime:PowershellCmdlet
summary: |-
  Gets latest policy compliance states summary for resources.
module: Az.PolicyInsights
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.PolicyInsights.Models.PolicyStateSummary" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzPolicyState
  href: ./Get-AzPolicyState.yml
syntaxes:
- >-
  Get-AzPolicyStateSummary [-SubscriptionId <String>] [-Top <Int32>] [-From <DateTime>] [-To <DateTime>]

   [-Filter <String>] [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary -ManagementGroupName <String> [-Top <Int32>] [-From <DateTime>] [-To <DateTime>]

   [-Filter <String>] [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary [-SubscriptionId <String>] -ResourceGroupName <String> [-Top <Int32>]

   [-From <DateTime>] [-To <DateTime>] [-Filter <String>] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary [-SubscriptionId <String>] -PolicySetDefinitionName <String> [-Top <Int32>]

   [-From <DateTime>] [-To <DateTime>] [-Filter <String>] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary [-SubscriptionId <String>] -PolicyDefinitionName <String> [-Top <Int32>]

   [-From <DateTime>] [-To <DateTime>] [-Filter <String>] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary [-SubscriptionId <String>] -PolicyAssignmentName <String> [-Top <Int32>]

   [-From <DateTime>] [-To <DateTime>] [-Filter <String>] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary [-SubscriptionId <String>] -ResourceGroupName <String> -PolicyAssignmentName <String>

   [-Top <Int32>] [-From <DateTime>] [-To <DateTime>] [-Filter <String>]

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  Get-AzPolicyStateSummary -ResourceId <String> [-Top <Int32>] [-From <DateTime>] [-To <DateTime>]

   [-Filter <String>] [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
examples:
- title: 'Example 1: Get latest non-compliant policy states summary in current subscription scope'
  code: |-
    PS C:\> Get-AzPolicyStateSummary
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the subscription in current session context.
  summary: ""
- title: 'Example 2: Get latest non-compliant policy states summary in the specified subscription scope'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -SubscriptionId "fff10b27-fff3-fff5-fff8-fffbe01e86a5"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the specified subscription.
  summary: ""
- title: 'Example 3: Get latest non-compliant policy states summary in management group scope'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -ManagementGroupName "myManagementGroup"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the specified management group.
  summary: ""
- title: 'Example 4: Get latest non-compliant policy states summary in resource group scope in current subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -ResourceGroupName "myResourceGroup"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the specified resource group (in the subscription in current session context).
  summary: ""
- title: 'Example 5: Get latest non-compliant policy states summary in resource group scope in the specified subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -SubscriptionId "fff10b27-fff3-fff5-fff8-fffbe01e86a5" -ResourceGroupName "myResourceGroup"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the specified resource group (in the specified subscription).
  summary: ""
- title: 'Example 6: Get latest non-compliant policy states summary for a resource'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -ResourceId "/subscriptions/fff10b27-fff3-fff5-fff8-fffbe01e86a5/resourceGroups/myResourceGroup/providers/Microsoft.EventHub/namespaces/myns1/eventhubs/eh1/consumergroups/cg1"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for the specified resource.
  summary: ""
- title: 'Example 7: Get latest non-compliant policy states summary for a policy set definition in current subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -PolicySetDefinitionName "fff58873-fff8-fff5-fffc-fffbe7c9d697"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy set definition (that exists in the subscription in current session context).
  summary: ""
- title: 'Example 8: Get latest non-compliant policy states summary for a policy set definition in the specified subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -SubscriptionId "fff10b27-fff3-fff5-fff8-fffbe01e86a5" -PolicySetDefinitionName "fff58873-fff8-fff5-fffc-fffbe7c9d697"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy set definition (that exists in the specified subscription).
  summary: ""
- title: 'Example 9: Get latest non-compliant policy states summary for a policy definition in current subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -PolicyDefinitionName "fff58873-fff8-fff5-fffc-fffbe7c9d697"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy definition (that exists in the subscription in current session context).
  summary: ""
- title: 'Example 10: Get latest non-compliant policy states summary for a policy definition in the specified subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -SubscriptionId "fff10b27-fff3-fff5-fff8-fffbe01e86a5" -PolicyDefinitionName "fff58873-fff8-fff5-fffc-fffbe7c9d697"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy definition (that exists in the specified subscription).
  summary: ""
- title: 'Example 11: Get latest non-compliant policy states summary for a policy assignment in current subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -PolicyAssignmentName "ddd8ef92e3714a5ea3d208c1"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy assignment (that exists in the subscription in current session context).
  summary: ""
- title: 'Example 12: Get latest non-compliant policy states summary for a policy assignment in the specified subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -SubscriptionId "fff10b27-fff3-fff5-fff8-fffbe01e86a5" -PolicyAssignmentName "ddd8ef92e3714a5ea3d208c1"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy assignment (that exists in the specified subscription).
  summary: ""
- title: 'Example 13: Get latest non-compliant policy states summary for a policy assignment in the specified resource group in the current subscription'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -ResourceGroupName "myResourceGroup" -PolicyAssignmentName "ddd8ef92e3714a5ea3d208c1"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources (within the tenant in current session context) effected by the specified policy assignment (that exists in the resource group in the subscription in current session context).
  summary: ""
- title: 'Example 14: Get latest non-compliant policy states summary in current subscription scope, with Top query option'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -Top 5
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the subscription in current session context. 
    The command orders the policy assignment summaries in the results by non-compliant resource counts in descending order, and takes only top 5 of those policy assignment summaries.
  summary: ""
- title: 'Example 15: Get latest non-compliant policy states summary in current subscription scope, with From and To query options'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -From "2018-03-08 00:00:00Z" -To "2018-03-15 00:00:00Z"
  description: |-
    Gets the summary view of latest policy compliance states generated within the date range specified for all resources within the subscription in current session context.
  summary: ""
- title: 'Example 16: Get latest non-compliant policy states summary in current subscription scope, with Filter query option'
  code: |-
    PS C:\> Get-AzPolicyStateSummary -Filter "(PolicyDefinitionAction eq 'deny' or PolicyDefinitionAction eq 'audit') and ResourceLocation ne 'eastus'"
  description: |-
    Gets the summary view of latest policy compliance states generated in the last day for all resources within the subscription in current session context.
    The command limits the results returned by filtering based on policy definition action (includes deny or audit actions), and resource location (excludes eastus location).
  summary: ""
parameters:
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Filter
  description: |+
    Filter expression using OData notation.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.DateTime" data-throw-if-not-resolved="False" />
  name: From
  description: |+
    ISO 8601 formatted timestamp specifying the start time of the interval to query.
    When not specified, defaults to 'To' parameter value minus 1 day.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ManagementGroupName
  isRequired: true
  description: |+
    Management group name.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: PolicyAssignmentName
  isRequired: true
  description: |+
    Policy assignment name.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: PolicyDefinitionName
  isRequired: true
  description: |+
    Policy definition name.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: PolicySetDefinitionName
  isRequired: true
  description: |+
    Policy set definition name.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    Resource group name.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceId
  isRequired: true
  description: |+
    Resource ID.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: SubscriptionId
  description: |+
    Subscription ID.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.DateTime" data-throw-if-not-resolved="False" />
  name: To
  description: |+
    ISO 8601 formatted timestamp specifying the end time of the interval to query.
    When not specified, defaults to time of request.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  name: Top
  description: |+
    Maximum number of records to return.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Az.PolicyInsights.Get-AzPolicyStateSummary
name: Get-AzPolicyStateSummary
description: |-
  Gets a summary view of latest policy compliance state numbers at various scopes, broken down into policy assignments and policy definitions. It includes only non-compliant policy states.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.PolicyInsights.dll-Help.xml
  Module Name: Az.PolicyInsights
  online version: https://docs.microsoft.com/en-us/powershell/module/az.policyinsights/get-azpolicystatesummary
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/PolicyInsights/PolicyInsights/help/Get-AzPolicyStateSummary.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/PolicyInsights/PolicyInsights/help/Get-AzPolicyStateSummary.md
