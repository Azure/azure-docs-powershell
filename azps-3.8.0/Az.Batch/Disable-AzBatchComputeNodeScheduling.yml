### YamlMime:PowershellCmdlet
summary: |-
  Disables task scheduling on the specified compute node.
module: Az.Batch
notes: ""
inputs:
- name: <xref href="Microsoft.Azure.Commands.Batch.Models.PSComputeNode" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Batch.BatchAccountContext" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="System.Void" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzBatchAccountKey
  href: ./Get-AzBatchAccountKey.yml
- text: Enable-AzBatchComputeNodeScheduling
  href: ./Enable-AzBatchComputeNodeScheduling.yml
syntaxes:
- >-
  Disable-AzBatchComputeNodeScheduling [-PoolId] <String> [-Id] <String>

   [-DisableSchedulingOption <DisableComputeNodeSchedulingOption>] -BatchContext <BatchAccountContext>

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  Disable-AzBatchComputeNodeScheduling [[-ComputeNode] <PSComputeNode>]

   [-DisableSchedulingOption <DisableComputeNodeSchedulingOption>] -BatchContext <BatchAccountContext>

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
examples:
- title: 'Example 1: Disable task scheduling on a compute node'
  code: |-
    PS C:\>$Context = Get-AzBatchAccountKey -AccountName "contosobatchaccount"
    PS C:\> Disable-AzBatchComputeNodeScheduling -PoolId "myPool" -Id "tvm-1783593343_34-20151117t222514z" -BatchContext $Context
  description: |-
    These commands disable task schedule on the compute node tvm-1783593343_34-20151117t222514z.
    To do this, the first command in the example creates an object reference to the account keys for the batch account contosobatchaccount.
    This object reference is stored in a variable named $context.
    The second command then uses this object reference and the **Disable-AzBatchComputeNodeScheduling** cmdlet to connect to the pool myPool and disable task scheduling on node tvm-1783593343_34-20151117t222514z.
    Because the *DisableComputeNodeSchedulingOptions* parameter was not included any tasks currently running on the compute node will be requeued.
  summary: ""
- title: 'Example 2: Disable task scheduling on all compute nodes in a pool'
  code: |-
    PS C:\>$Context = Get-AzBatchAccountKey -AccountName "contosobatchaccount"
    PS C:\> Get-AzBatchComputeNode -PoolId "Pool06"  -BatchContext $Context | Disable-AzBatchComputeNodeScheduling -BatchContext $Context
  description: |-
    These commands disable task scheduling on all the computer nodes in the batch pool Pool06.
    To perform this task, the first command in the example creates an object reference to the account keys for the batch account contosobatchaccount.
    This object reference is stored in a variable named $context.
    The second command in the example then uses this object reference and **Get-AzBatchComputeNode** to return a collection of all the compute nodes found in Pool06.
    That collection is then piped to then **Disable-AzBatchComputeNodeScheduling** cmdlet to disable task scheduling on each compute node in the collection.
    Because the *DisableComputeNodeSchedulingOptions* parameter was not included any tasks currently running on the compute nodes will be requeued.
  summary: ""
parameters:
- type: <xref href="Microsoft.Azure.Commands.Batch.BatchAccountContext" data-throw-if-not-resolved="False" />
  name: BatchContext
  isRequired: true
  description: |+
    Specifies the **BatchAccountContext** instance that this cmdlet uses to interact with the Batch service.
    If you use the Get-AzBatchAccount cmdlet to get your BatchAccountContext, then Azure Active Directory authentication will be used when interacting with the Batch service. To use shared key authentication instead, use the Get-AzBatchAccountKey cmdlet to get a BatchAccountContext object with its access keys populated. When using shared key authentication, the primary access key is used by default. To change the key to use, set the BatchAccountContext.KeyInUse property.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Batch.Models.PSComputeNode" data-throw-if-not-resolved="False" />
  name: ComputeNode
  description: |+
    Specifies an object reference to the compute node where task scheduling is disabled.
    This object reference is created by using the Get-AzBatchComputeNode cmdlet and storing the returned compute node object in a variable.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="Microsoft.Azure.Batch.Common.DisableComputeNodeSchedulingOption" data-throw-if-not-resolved="False" /><span>]</span>
  name: DisableSchedulingOption
  description: |+
    Specifies how this cmdlet deals with any tasks currently running on the computer node where scheduling is being disabled.
    The acceptable values for this parameter are:
    - Requeue.
    Tasks are stopped immediately and returned to the job queue.
    This enables the tasks to be rescheduled on another compute node.
    This is the default value. 
    - Terminate.
    Tasks are stopped immediately and removed from the job queue.
    These tasks will not be rescheduled. 
    - TaskCompletion.
    Currently running tasks will be able to complete before task scheduling is disabled on the compute node.
    No new tasks will be scheduled on this node. 
    - RetainedData.
    Currently running tasks will be able to complete and data retention periods will be able to expire before task scheduling is disabled on the compute node.
    No new tasks will be scheduled on this node.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Requeue, Terminate, TaskCompletion
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Id
  isRequired: true
  description: |+
    Specifies the ID of the compute node where task scheduling is disabled.

  defaultValue: None
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: PoolId
  isRequired: true
  description: |+
    Specifies the ID of the batch pool that contains the compute node where task scheduling is disabled.
    If you use the *PoolId* parameter, do not use the *ComputeNode* parameter in that same command.

  defaultValue: None
  position: "0"
  aliases: ""
  parameterValueGroup: ""
uid: Az.Batch.Disable-AzBatchComputeNodeScheduling
name: Disable-AzBatchComputeNodeScheduling
description: |-
  The **Disable-AzBatchComputeNodeScheduling** cmdlet disables task scheduling on the specified compute node.
  A compute node is an Azure virtual machine dedicated to a specific application workload.
  When you disable task scheduling on a compute node you will also have the option of determining what to do about jobs currently in the node's task queue.
  **Disable-AzBatchComputeNodeScheduling** lets you do the following: 
  - Terminate the tasks and put them back in the job queue.
  This enables those tasks to be rescheduled on another compute node. 
  - Terminate the tasks and remove them from the job queue.
  Tasks stopped in this manner will not be rescheduled. 
  - Wait for all the tasks currently being executed to complete and then disable task scheduling on the compute node. 
  - Wait for all the running tasks to complete and all the data retention periods to expire, and then disable task scheduling on the compute node.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Batch.dll-Help.xml
  Module Name: Az.Batch
  ms.assetid: 2DF5FB4D-A5CB-439C-AC6F-DF2130AF33EC
  online version: https://docs.microsoft.com/en-us/powershell/module/az.batch/disable-azbatchcomputenodescheduling
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Batch/Batch/help/Disable-AzBatchComputeNodeScheduling.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Batch/Batch/help/Disable-AzBatchComputeNodeScheduling.md
