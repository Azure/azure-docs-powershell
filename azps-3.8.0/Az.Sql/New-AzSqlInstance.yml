### YamlMime:PowershellCmdlet
summary: |-
  Creates an Azure SQL Database Managed Instance.
module: Az.Sql
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Sql.ManagedInstance.Model.AzureSqlManagedInstanceModel" data-throw-if-not-resolved="False" />
  description: ""
syntaxes:
- >-
  New-AzSqlInstance [-Name] <String> [-ResourceGroupName] <String> -AdministratorCredential <PSCredential>

   -Location <String> -SubnetId <String> [-LicenseType <String>] [-StorageSizeInGB <Int32>] -VCore <Int32>

   -Edition <String> -ComputeGeneration <String> [-Collation <String>] [-PublicDataEndpointEnabled]

   [-ProxyOverride <String>] [-TimezoneId <String>] [-Tag <Hashtable>] [-AssignIdentity]

   [-DnsZonePartner <String>] [-InstancePoolName <String>] [-AsJob] [-MinimalTlsVersion <String>] [-DefaultProfile <IAzureContextContainer>]

   [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzSqlInstance [-InstancePool] <AzureSqlInstancePoolModel> [-Name] <String>

   -AdministratorCredential <PSCredential> [-StorageSizeInGB <Int32>] -VCore <Int32> [-Collation <String>]

   [-PublicDataEndpointEnabled] [-ProxyOverride <String>] [-TimezoneId <String>] [-Tag <Hashtable>]

   [-AssignIdentity] [-DnsZonePartner <String>] [-AsJob] [-DefaultProfile <IAzureContextContainer>] [-WhatIf]

   [-Confirm] [<CommonParameters>]
- >-
  New-AzSqlInstance [-InstancePoolResourceId] <String> [-Name] <String> -AdministratorCredential <PSCredential>

   [-StorageSizeInGB <Int32>] -VCore <Int32> [-Collation <String>] [-PublicDataEndpointEnabled]

   [-ProxyOverride <String>] [-TimezoneId <String>] [-Tag <Hashtable>] [-AssignIdentity]

   [-DnsZonePartner <String>] [-AsJob] [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm]

   [<CommonParameters>]
- >-
  New-AzSqlInstance [-Name] <String> [-ResourceGroupName] <String> -AdministratorCredential <PSCredential>

   -Location <String> -SubnetId <String> [-LicenseType <String>] [-StorageSizeInGB <Int32>] -VCore <Int32>

   -SkuName <String> [-Collation <String>] [-PublicDataEndpointEnabled] [-ProxyOverride <String>]

   [-TimezoneId <String>] [-Tag <Hashtable>] [-AssignIdentity] [-DnsZonePartner <String>]

   [-InstancePoolName <String>] [-AsJob] [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm]

   [<CommonParameters>]
examples:
- title: 'Example 1: Create a new instance'
  code: |-
    PS C:\>New-AzSqlInstance -Name managedInstance1 -ResourceGroupName ResourceGroup01 -Location westcentralus -AdministratorCredential (Get-Credential) -SubnetId "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name" -LicenseType LicenseIncluded -StorageSizeInGB 1024 -VCore 16 -SkuName GP_Gen4 -DnsZonePartner "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/managedInstances/partnerServerForDnsZone"
    Location                 : westcentralus
    Id                       : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/managedInstances/managedInstance1
    ResourceGroupName        : resourcegroup01
    ManagedInstanceName      : managedInstance1
    Tags                     :
    Identity                 : Microsoft.Azure.Management.Sql.Models.ResourceIdentity
    Sku                      : Microsoft.Azure.Management.Internal.Resources.Models.Sku
    FullyQualifiedDomainName : managedInstance1.wcusxxxxxxxxxxxxx.database.windows.net
    AdministratorLogin       : adminLogin1
    AdministratorPassword    :
    SubnetId                 : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name
    LicenseType              : LicenseIncluded
    VCores                   : 16
    StorageSizeInGB          : 1024
    DnsZone                  : ad35cna0mw
    InstancePoolName         :
  description: |-
    This command creates a new instance by using the SkuName parameter.
  summary: ""
- title: 'Example 2: Create a new instance'
  code: |-
    PS C:\>New-AzSqlInstance -Name managedInstance2 -ResourceGroupName ResourceGroup01 -Location westcentralus -AdministratorCredential (Get-Credential) -SubnetId "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name" -LicenseType LicenseIncluded -StorageSizeInGB 1024 -VCore 16 -Edition "GeneralPurpose" -ComputeGeneration Gen4
    Location                 : westcentralus
    Id                       : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/managedInstances/managedInstance1
    ResourceGroupName        : resourcegroup01
    ManagedInstanceName      : managedInstance2
    Tags                     :
    Identity                 : Microsoft.Azure.Management.Sql.Models.ResourceIdentity
    Sku                      : Microsoft.Azure.Management.Internal.Resources.Models.Sku
    FullyQualifiedDomainName : managedInstance1.wcusxxxxxxxxxxxxx.database.windows.net
    AdministratorLogin       : adminLogin1
    AdministratorPassword    :
    SubnetId                 : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name
    LicenseType              : LicenseIncluded
    VCores                   : 16
    StorageSizeInGB          : 1024
    DnsZone                  : ad35cna0mw
    InstancePoolName         :
  description: |-
    This command creates a new instance by using by using Edition and ComputeGeneration parameters.
  summary: ""
- title: 'Example 3: Create a new instance in an instance pool using an instance pool object'
  code: |-
    PS C:\> $instancePool = Get-AzSqlInstancePool -ResourceGroupName resourcegroup01 -Name instancepool0
    PS C:\> $instancePool | New-AzSqlInstance -Name managedInstance2 -AdministratorCredential (Get-Credential) -LicenseType LicenseIncluded -StorageSizeInGB 1024 -VCore 2
    Location                 : westcentralus
    Id                       : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/managedInstances/managedInstance1
    ResourceGroupName        : resourcegroup01
    ManagedInstanceName      : managedInstance2
    Tags                     :
    Identity                 : Microsoft.Azure.Management.Sql.Models.ResourceIdentity
    Sku                      : Microsoft.Azure.Management.Internal.Resources.Models.Sku
    FullyQualifiedDomainName : managedInstance1.wcusxxxxxxxxxxxxx.database.windows.net
    AdministratorLogin       : adminLogin1
    AdministratorPassword    :
    SubnetId                 : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name
    LicenseType              : LicenseIncluded
    VCores                   : 2
    StorageSizeInGB          : 1024
    DnsZone                  : ad35cna0mw
    InstancePoolName         : instancepool0
  description: |-
    This command creates a new instance in an instance pool using an instance pool object.
  summary: ""
- title: 'Example 4: Create a new instance in an instance pool using an instance pool resource identifier'
  code: |-
    PS C:\> $instancePool | New-AzSqlInstance -Name managedInstance2 -AdministratorCredential (Get-Credential) -LicenseType LicenseIncluded -StorageSizeInGB 1024 -VCore 2 -InstancePoolResourceId "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/instancePools/instancePool0"
    Location                 : westcentralus
    Id                       : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/managedInstances/managedInstance1
    ResourceGroupName        : resourcegroup01
    ManagedInstanceName      : managedInstance2
    Tags                     :
    Identity                 : Microsoft.Azure.Management.Sql.Models.ResourceIdentity
    Sku                      : Microsoft.Azure.Management.Internal.Resources.Models.Sku
    FullyQualifiedDomainName : managedInstance1.wcusxxxxxxxxxxxxx.database.windows.net
    AdministratorLogin       : adminLogin1
    AdministratorPassword    :
    SubnetId                 : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name
    LicenseType              : LicenseIncluded
    VCores                   : 2
    StorageSizeInGB          : 1024
    DnsZone                  : ad35cna0mw
    InstancePoolName         : instancepool0
  description: |-
    This command creates a new instance in an instance pool using the instance pool's resource identifier.
  summary: ""
- title: 'Example 5: Create a new instance in an instance pool'
  code: |-
    PS C:\>New-AzSqlInstance -Name managedInstance1 -ResourceGroupName resourceGroup01 -Location westcentralus -AdministratorCredential (Get-Credential) -SubnetId "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name" -LicenseType LicenseIncluded -StorageSizeInGB 32 -VCore 2 -ComputeGeneration Gen5 -Edition GeneralPurpose -InstancePoolName instancePool0
    Location                 : westcentralus
    Id                       : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Sql/managedInstances/managedInstance1
    ResourceGroupName        : resourcegroup01
    ManagedInstanceName      : managedInstance1
    Tags                     :
    Identity                 : Microsoft.Azure.Management.Sql.Models.ResourceIdentity
    Sku                      : Microsoft.Azure.Management.Internal.Resources.Models.Sku
    FullyQualifiedDomainName : managedInstance1.wcusxxxxxxxxxxxxx.database.windows.net
    AdministratorLogin       : adminLogin1
    AdministratorPassword    :
    SubnetId                 : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/resourcegroup01/providers/Microsoft.Network/virtualNetworks/vnet_name/subnets/subnet_name
    LicenseType              : LicenseIncluded
    VCores                   : 2
    StorageSizeInGB          : 32
    DnsZone                  : ad35cna0mw
    InstancePoolName         : instancePool0
  description: |-
    This command creates a new instance in an instance pool with name instancePool0
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.PSCredential" data-throw-if-not-resolved="False" />
  name: AdministratorCredential
  isRequired: true
  description: |+
    The SQL authentication credential of the instance.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Run cmdlet in the background

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AssignIdentity
  description: |+
    Generate and assign an Azure Active Directory Identity for this Managed instance for use with key management services like Azure KeyVault.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Collation
  description: |+
    The collation of the Azure SQL Managed Instance to use.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ComputeGeneration
  isRequired: true
  description: |+
    The compute generation for the instance.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: None
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: DnsZonePartner
  description: |+
    The resource id of the partner Managed Server to inherit DnsZone property from for Managed instance creation

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Edition
  isRequired: true
  description: |+
    The edition for the instance.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Sql.Instance_Pools.Model.AzureSqlInstancePoolModel" data-throw-if-not-resolved="False" />
  name: InstancePool
  isRequired: true
  description: |+
    The instance pool parent object.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ParentObject
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: InstancePoolName
  description: |+
    The instance pool to place this instance in.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: InstancePoolResourceId
  isRequired: true
  description: |+
    The instance pool resource id.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ResourceId
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: LicenseType
  description: |+
    Determines which License Type to use. Possible values are:
    - BasePrice - Azure Hybrid Benefit (AHB) discounted pricing for existing SQL Server license owners is applied. Managed Instance service price will be discounted for existing SQL Server license owners.
    - LicenseIncluded - Azure Hybrid Benefit (AHB) discount pricing for existing SQL Server license owners is not applied. Managed Instance service price will include a new SQL Server license costs.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Location
  isRequired: true
  description: |+
    The location in which to create the instance

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: MinimalTlsVersion
  description: |+
    The minimal TLS version to enforce for Managed instance 

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Instance name.

  defaultValue: None
  position: "0"
  aliases: InstanceName
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ProxyOverride
  description: |+
    The connection type used for connecting to the instance.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: PublicDataEndpointEnabled
  description: |+
    Whether or not the public data endpoint is enabled for the instance.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    The name of the resource group.

  defaultValue: None
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: SkuName
  isRequired: true
  description: |+
    The SKU name for the instance e.g.
    'GP_Gen4', 'BC_Gen4'.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  name: StorageSizeInGB
  description: |+
    Determines how much Storage size to associate with instance

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: SubnetId
  isRequired: true
  description: |+
    The Subnet Id to use for instance creation

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  name: Tag
  description: |+
    The tags to associate with the instance

  defaultValue: None
  position: Named
  aliases: Tags
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: TimezoneId
  description: |+
    The time zone id for the instance to set. A list of time zone ids is exposed through the sys.time_zone_info (Transact-SQL) view.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  name: VCore
  isRequired: true
  description: |+
    Determines how much VCore to associate with instance

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: None
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.Sql.New-AzSqlInstance
name: New-AzSqlInstance
description: |-
  The **New-AzSqlInstance** cmdlet creates an Azure SQL Database Managed instance.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Sql.dll-Help.xml
  Module Name: Az.Sql
  online version: https://docs.microsoft.com/en-us/powershell/module/az.sql/new-azsqlinstance
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Sql/Sql/help/New-AzSqlInstance.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Sql/Sql/help/New-AzSqlInstance.md
