### YamlMime:PowershellCmdlet
summary: |-
  Uploads a virtual hard disk from an on-premises virtual machine to a blob in a cloud storage account in Azure.
module: Az.Compute
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Uri" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.IO.FileInfo" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e" data-throw-if-not-resolved="False" /><span>]</span><span>]</span>
  description: ""
- name: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Compute.Models.VhdUploadContext" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Save-AzVhd
  href: ./Save-AzVhd.yml
syntaxes:
- >-
  Add-AzVhd [[-ResourceGroupName] <String>] [-Destination] <Uri> [-LocalFilePath] <FileInfo>

   [[-NumberOfUploaderThreads] <Int32>] [[-BaseImageUriToPatch] <Uri>] [-OverWrite] [-AsJob]

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
examples:
- title: 'Example 1: Add a VHD file'
  code: |-
    PS C:\> Add-AzVhd -Destination "http://contosoaccount.blob.core.windows.net/vhdstore/win7baseimage.vhd" -LocalFilePath "C:\vhd\Win7Image.vhd"
  description: |-
    This command adds a .vhd file to a storage account.
  summary: ""
- title: 'Example 2: Add a VHD file and overwrite the destination'
  code: |-
    PS C:\> Add-AzVhd -Destination "http://contosoaccount.blob.core.windows.net/vhdstore/win7baseimage.vhd" -LocalFilePath "C:\vhd\Win7Image.vhd" -Overwrite
  description: |-
    This command adds a .vhd file to a storage account.
    The command overwrites an existing file.
  summary: ""
- title: 'Example 3: Add a VHD file and specify the number of threads'
  code: |-
    PS C:\> Add-AzVhd -Destination "http://contosoaccount.blob.core.windows.net/vhdstore/win7baseimage.vhd" -LocalFilePath "C:\vhd\Win7Image.vhd" -NumberOfUploaderThreads 32
  description: |-
    This command adds a .vhd file to a storage account.
    The command specifies the number of threads to use to upload the file.
  summary: ""
- title: 'Example 4: Add a VHD file and specify the SAS URI'
  code: |-
    PS C:\> Add-AzVhd -Destination "http://contosoaccount.blob.core.windows.net/vhdstore/win7baseimage.vhd?st=2013-01 -09T22%3A15%3A49Z&amp;se=2013-01-09T23%3A10%3A49Z&amp;sr=b&amp;sp=w&amp;sig=13T9Ow%2FRJAMmhfO%2FaP3HhKKJ6AY093SmveO SIV4%2FR7w%3D" -LocalFilePath "C:\vhd\win7baseimage.vhd"
  description: |-
    This command adds a .vhd file to a storage account and specifies the SAS URI.
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Run cmdlet in the background and return a Job to track progress.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Uri" data-throw-if-not-resolved="False" />
  name: BaseImageUriToPatch
  description: |+
    Specifies the URI to a base image blob in Azure Blob Storage.
    An SAS can be specified as the value for this parameter.

  defaultValue: None
  pipelineInput: true
  position: "4"
  aliases: bs
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.Uri" data-throw-if-not-resolved="False" />
  name: Destination
  isRequired: true
  description: |+
    Specifies the URI of a blob in Blob Storage.
    The parameter supports SAS URI, although patching scenarios destination cannot be an SAS URI.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: dst
  parameterValueGroup: ""
- type: <xref href="System.IO.FileInfo" data-throw-if-not-resolved="False" />
  name: LocalFilePath
  isRequired: true
  description: |+
    Specifies the path of the local .vhd file.

  defaultValue: None
  pipelineInput: true
  position: "2"
  aliases: lf
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32" data-throw-if-not-resolved="False" /><span>]</span>
  name: NumberOfUploaderThreads
  description: |+
    Specifies the number of uploader threads to be used when uploading the .vhd file.

  defaultValue: None
  pipelineInput: true
  position: "3"
  aliases: th
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: OverWrite
  description: |+
    Indicates that this cmdlet overwrites an existing blob in the specified destination URI, if one exists.

  defaultValue: None
  pipelineInput: true
  position: "5"
  aliases: o
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  description: |+
    Specifies the name of the resource group of the virtual machine.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
uid: Az.Compute.Add-AzVhd
name: Add-AzVhd
description: |-
  The **Add-AzVhd** cmdlet uploads on-premises virtual hard disks, in .vhd file format, to a blob storage account as fixed virtual hard disks.
  You can configure the number of uploader threads that will be used or overwrite an existing blob in the specified destination URI.
  Also supported is the ability to upload a patched version of an on-premises .vhd file.
  When a base virtual hard disk has already been uploaded, you can upload differencing disks that use the base image as the parent.
  Shared access signature (SAS) URI is supported also.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Compute.dll-Help.xml
  Module Name: Az.Compute
  ms.assetid: D08DAA8B-B7BF-4167-AB16-F2723985A0B7
  online version: https://docs.microsoft.com/en-us/powershell/module/az.compute/add-azvhd
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Compute/Compute/help/Add-AzVhd.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Compute/Compute/help/Add-AzVhd.md
