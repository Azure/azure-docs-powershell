### YamlMime:PowershellCmdlet
summary: |-
  Update one or more of the following properties in IoT security solution: tags, recommendation configuration, user defined resources
module: Az.Security
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSIotSecuritySolution" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSUserDefinedResources" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSRecommendationConfiguration" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSIotSecuritySolution" data-throw-if-not-resolved="False" />
  description: ""
syntaxes:
- >-
  Update-AzIotSecuritySolution -Name <String> -ResourceGroupName <String> [-Tag <Hashtable>]

   [-UserDefinedResource <PSUserDefinedResources>]

   [-RecommendationsConfiguration <PSRecommendationConfiguration[]>] [-DefaultProfile <IAzureContextContainer>]

   [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  Update-AzIotSecuritySolution -ResourceId <String> [-Tag <Hashtable>]

   [-UserDefinedResource <PSUserDefinedResources>]

   [-RecommendationsConfiguration <PSRecommendationConfiguration[]>] [-DefaultProfile <IAzureContextContainer>]

   [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  Update-AzIotSecuritySolution -InputObject <PSIotSecuritySolution> [-Tag <Hashtable>]

   [-UserDefinedResource <PSUserDefinedResources>]

   [-RecommendationsConfiguration <PSRecommendationConfiguration[]>] [-DefaultProfile <IAzureContextContainer>]

   [-WhatIf] [-Confirm] [<CommonParameters>]
examples:
- title: Example 1
  code: |-
    PS C:\> $RecConfig = New-AzIotSecuritySolutionRecommendationConfigurationObject -RecommendationType "IoT_OpenPorts" -Enabled $false
    PS C:\> $UserDefinedResource = New-AzIotSecuritySolutionUserDefinedResourcesObject -Query 'where type != "microsoft.devices/iothubs" | where name contains "v2"' 
    -QuerySubscriptionList @("XXXXXXXX-XXXX-XXXXX-XXXX-XXXXXXXXXXXX")	
    PS C:\> Update-AzIotSecuritySolution -Name "MySample" -ResourceGroupName "MyResourceGroup" -RecommendationsConfiguration @($RecConfig) -UserDefinedResource $UserDefinedResource

    Id: "/subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourceGroups/MyResourceGroup/providers/Microsoft.Security/IoTSecuritySolutions/MySample"
    Name: "MySample"
    Type: "Microsoft.Security/IoTSecuritySolutions"
    Location: "westus"
    DisplayName: "MySample"
    status: "Enabled"
    Export: ["RawEvents"]
    DisabledDataSources: ["TwinData"]
    Workspace: "/subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourcegroups/MyResourceGroup/providers/microsoft.operationalinsights/workspaces/MyLA"
    AdditionalWorkspaces: null
    IotHubs: ["/subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourcegroups/MyResourceGroup/providers/microsoft.devices/iothubs/MySample"]
    UserDefinedResources: {
    	Query: 'where type != "microsoft.devices/iothubs" | where name contains "v2"' 
    	QuerySubscriptions: ["XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"]
    }
    RecommendationsConfiguration: [
    {
    	RecommendationType: "IoT_ACRAuthentication"
    	Name: "Service prinicpal not used with ACR repository"
    	Status: "Enabled"
    }
    {
    	RecommendationType: "IoT_OpenPorts"
    	Name: "Device has open port"
    	Status: "Disabled"
    }
    {
    	RecommendationType: "IoT_AgentSendsUnutilizedMessages"
    	Name: "Agent sending underutilized messages"
    	Status: "Enabled"
    }]
    AutoDiscoveredResources: ["/subscriptions/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/resourcegroups/MyResourceGroup/providers/microsoft.devices/iothubs/MySample"]
    UnmaskedIpLoggingStatus: "Enabled"
  description: |-
    Update iot security solution "MySample" from resource group "MyResourceGroup" with recommendation configuration and user defined resources
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: None
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSIotSecuritySolution" data-throw-if-not-resolved="False" />
  name: InputObject
  isRequired: true
  description: |+
    Input Object.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Resource name.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSRecommendationConfiguration" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: RecommendationsConfiguration
  description: |+
    Recommendations configuration.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    Resource group name.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceId
  isRequired: true
  description: |+
    ID of the security resource that you want to invoke the command on.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  name: Tag
  description: |+
    Tags.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Security.Models.IotSecuritySolutions.PSUserDefinedResources" data-throw-if-not-resolved="False" />
  name: UserDefinedResource
  description: |+
    User defined resources.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: None
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.Security.Update-AzIotSecuritySolution
name: Update-AzIotSecuritySolution
description: |-
  The Update-AzIotSecuritySolution cmdlet updayes one or more of the following properties in a specific IoT security solution: tags, recommendation configuration, user defined resources.
  Only the specified properties will be updated inside the iot security solution.
  The IoT security solution collects security data and events from iot devices and iot hub to help prevent and detect threats.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Security.dll-Help.xml
  Module Name: Az.Security
  online version: https://docs.microsoft.com/en-us/powershell/module/az.security/Update-AzIotSecuritySolution
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Security/Security/help/Update-AzIotSecuritySolution.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Security/Security/help/Update-AzIotSecuritySolution.md
