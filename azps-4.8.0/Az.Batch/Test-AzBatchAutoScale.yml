### YamlMime:PowershellCmdlet
summary: |-
  Gets the result of an automatic scaling formula on a pool.
module: Az.Batch
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Batch.BatchAccountContext" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Batch.Models.PSAutoScaleRun" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Disable-AzBatchAutoScale
  href: ./Disable-AzBatchAutoScale.yml
- text: Enable-AzBatchAutoScale
  href: ./Enable-AzBatchAutoScale.yml
- text: Get-AzBatchAccountKey
  href: ./Get-AzBatchAccountKey.yml
- text: Azure Batch Cmdlets
  href: /powershell/module/Az.Batch/
syntaxes:
- >-
  Test-AzBatchAutoScale [-Id] <String> [-AutoScaleFormula] <String> -BatchContext <BatchAccountContext>

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
examples:
- title: 'Example 1: Evaluate an autoscale formula on a pool'
  code: |-
    PS C:\>$Formula = 'totalNodes=($CPUPercent.GetSamplePercent(TimeInterval_Minute*0,TimeInterval_Minute*10)<0.7?5:(min($CPUPercent.GetSample(TimeInterval_Minute*0, TimeInterval_Minute*10))>0.8?($CurrentDedicated*1.1):$CurrentDedicated));$TargetDedicated=min(100,totalNodes);';
    PS C:\> $Evaluation = Test-AzBatchAutoScale -Id "ContosoPool" -AutoScaleFormula $Formula -BatchContext $Context
    PS C:\> $Evaluation.AutoScaleRun.Results
    $TargetDedicated=5;$NodeDeallocationOption=requeue;totalNodes=5
  description: |-
    The first command stores a formula in the $Formula variable for use in the example.
    The second command evaluates the autoscale formula on the pool that has the ID ContosoPool.
    The final command displays the **Results** by using standard dot syntax.
  summary: ""
parameters:
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: AutoScaleFormula
  isRequired: true
  description: |+
    Specifies the formula for the desired number of compute nodes in the pool.

  defaultValue: None
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Batch.BatchAccountContext" data-throw-if-not-resolved="False" />
  name: BatchContext
  isRequired: true
  description: |+
    Specifies the **BatchAccountContext** instance that this cmdlet uses to interact with the Batch service.
    If you use the Get-AzBatchAccount cmdlet to get your BatchAccountContext, then Azure Active Directory authentication will be used when interacting with the Batch service. To use shared key authentication instead, use the Get-AzBatchAccountKey cmdlet to get a BatchAccountContext object with its access keys populated. When using shared key authentication, the primary access key is used by default. To change the key to use, set the BatchAccountContext.KeyInUse property.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Id
  isRequired: true
  description: |+
    Specifies the object ID of the pool for which to test automatic scaling.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
uid: Az.Batch.Test-AzBatchAutoScale
name: Test-AzBatchAutoScale
description: |-
  The **Test-AzBatchAutoScale** cmdlet gets the result of an automatic scaling formula on the specified pool.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Batch.dll-Help.xml
  Module Name: Az.Batch
  ms.assetid: BF0C1A2F-2703-492F-A3A7-053416A5D1EB
  online version: https://docs.microsoft.com/en-us/powershell/module/az.batch/test-azbatchautoscale
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Batch/Batch/help/Test-AzBatchAutoScale.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Batch/Batch/help/Test-AzBatchAutoScale.md
