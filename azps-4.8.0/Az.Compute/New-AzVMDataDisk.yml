### YamlMime:PowershellCmdlet
summary: |-
  Creates a local data disk object for a virtual machine or a Vmss VM.
module: Az.Compute
notes: ""
inputs:
- name: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Management.Compute.Models.CachingTypes" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e" data-throw-if-not-resolved="False" /><span>]</span><span>]</span>
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Compute.Models.PSVirtualMachineDataDisk" data-throw-if-not-resolved="False" />
  description: ""
syntaxes:
- >-
  New-AzVMDataDisk [-Lun] <Int32> [-CreateOption] <String> [-Name <String>] [-Caching <CachingTypes>]

   [-DiskSizeInGB <Int32>] [-VhdUri <String>] [-SourceImageUri <String>] [-DiskEncryptionSetId <String>]

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  New-AzVMDataDisk [-Lun] <Int32> [-CreateOption] <String> [-Name <String>] [-Caching <CachingTypes>]

   [-DiskSizeInGB <Int32>] [-ManagedDiskId <String>] [-StorageAccountType <String>]

   [-DiskEncryptionSetId <String>] [-WriteAccelerator] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
examples:
- title: 'Example 1: Add a managed data disk to a Vmss VM.'
  code: |-
    PS C:\> $disk = Get-AzDisk -ResourceGroupName $rgname -DiskName $diskname0
    PS C:\> $datadisk = New-AzVMDataDisk -Caching 'ReadOnly' -Lun 2 -CreateOption Attach -StorageAccountType Standard_LRS -ManagedDiskId $disk.Id
    PS C:\> $VmssVM = Get-AzVmssVM -ResourceGroupName "myrg" -VMScaleSetName "myvmss" -InstanceId 0
    PS C:\> Update-AzVmssVM -ResourceGroupName "myrg" -VMScaleSetName "myvmss" -InstanceId 0 -DataDisk $datadisk
  description: |-
    The first command gets an existing managed disk.
    The next command creates a data disk object with the managed disk.
    The next command gets an existing Vmss VM given by the resource group name, the vmss name and the instance ID.
    The final command updates the Vmss VM by adding a new data disk.
  summary: ""
- title: Example 2
  code: |-
    <!-- Aladdin Generated Example --> 
    New-AzVMDataDisk -Caching None -CreateOption Attach -DiskSizeInGB 1 -Lun 2 -Name 'AgentPool01'
  description: ""
  summary: |+
    Creates a local data disk object for a virtual machine or a Vmss VM. (autogenerated)

parameters:
- type: <xref href="Microsoft.Azure.Management.Compute.Models.CachingTypes" data-throw-if-not-resolved="False" />
  name: Caching
  description: |+
    The virtual machine data disk's caching.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: None, ReadOnly, ReadWrite
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: CreateOption
  isRequired: true
  description: |+
    The virtual machine data disk's create option.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: DiskEncryptionSetId
  description: |+
    The virtual machine managed disk encryption set's Id.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32" data-throw-if-not-resolved="False" /><span>]</span>
  name: DiskSizeInGB
  description: |+
    The virtual machine data disk's size in GB.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  name: Lun
  isRequired: true
  description: |+
    The virtual machine data disk's Lun.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ManagedDiskId
  description: |+
    The virtual machine managed disk's Id.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  description: |+
    The virtual machine data disk's name.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: SourceImageUri
  description: |+
    The virtual machine OS disk's source image Uri.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: SourceImage
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: StorageAccountType
  description: |+
    The virtual machine managed disk's account type.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: VhdUri
  description: |+
    The virtual machine data disk's Vhd Uri.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WriteAccelerator
  description: |+
    Specifies whether WriteAccelerator should be enabled or disabled on a managed data disk.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Az.Compute.New-AzVMDataDisk
name: New-AzVMDataDisk
description: |-
  The **New-AzVMDataDisk** cmdlet creates a local data disk object for a virtual machine or a Vmss VM.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Compute.dll-Help.xml
  Module Name: Az.Compute
  online version: https://docs.microsoft.com/en-us/powershell/module/az.compute/new-azvmdatadisk
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Compute/Compute/help/New-AzVMDataDisk.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Compute/Compute/help/New-AzVMDataDisk.md
