### YamlMime:PowershellCmdlet
summary: |-
  Creates a key vault.
module: Az.KeyVault
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Management.KeyVault.Models.SkuName" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.KeyVault.Models.PSKeyVault" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzKeyVault
  href: ./Get-AzKeyVault.yml
- text: Remove-AzKeyVault
  href: ./Remove-AzKeyVault.yml
syntaxes:
- >-
  New-AzKeyVault [-Name] <String> [-ResourceGroupName] <String> [-Location] <String> [-EnabledForDeployment]

   [-EnabledForTemplateDeployment] [-EnabledForDiskEncryption] [-DisableSoftDelete] [-EnablePurgeProtection]

   [-EnableRbacAuthorization] [-SoftDeleteRetentionInDays <Int32>] [-Sku <SkuName>] [-Tag <Hashtable>]

   [-NetworkRuleSet <PSKeyVaultNetworkRuleSet>] [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm]

   [<CommonParameters>]
examples:
- title: 'Example 1: Create a Standard key vault'
  code: |-
    PS C:\> New-AzKeyVault -VaultName 'Contoso03Vault' -ResourceGroupName 'Group14' -Location 'East US'

    Vault Name                       : contoso03vault
    Resource Group Name              : group14
    Location                         : East US
    Resource ID                      : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx/resourceGroups/group14/providers
                                       /Microsoft.KeyVault/vaults/contoso03vault
    Vault URI                        : https://contoso03vault.vault.azure.net/
    Tenant ID                        : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
    SKU                              : Standard
    Enabled For Deployment?          : False
    Enabled For Template Deployment? : False
    Enabled For Disk Encryption?     : False
    Soft Delete Enabled?             :
    Access Policies                  :
                                       Tenant ID                                  : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
                                       Object ID                                  : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
                                       Application ID                             :
                                       Display Name                               : User Name (username@microsoft.com)
                                       Permissions to Keys                        : get, create, delete, list, update,
                                       import, backup, restore, recover
                                       Permissions to Secrets                     : get, list, set, delete, backup,
                                       restore, recover
                                       Permissions to Certificates                : get, delete, list, create, import,
                                       update, deleteissuers, getissuers, listissuers, managecontacts, manageissuers,
                                       setissuers, recover, backup, restore
                                       Permissions to (Key Vault Managed) Storage : delete, deletesas, get, getsas, list,
                                       listsas, regeneratekey, set, setsas, update, recover, backup, restore

    Tags                             :
  description: |-
    This command creates a key vault named Contoso03Vault, in the Azure region East US. The command
    adds the key vault to the resource group named Group14. Because the command does not specify a
    value for the *SKU* parameter, it creates a Standard key vault.
  summary: ""
- title: 'Example 2: Create a Premium key vault'
  code: |-
    PS C:\>New-AzKeyVault -VaultName 'Contoso03Vault' -ResourceGroupName 'Group14' -Location 'East US' -Sku 'Premium'

    Vault Name                       : contoso03vault
    Resource Group Name              : group14
    Location                         : East US
    Resource ID                      : /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx/resourceGroups/group14/providers
                                       /Microsoft.KeyVault/vaults/contoso03vault
    Vault URI                        : https://contoso03vault.vault.azure.net/
    Tenant ID                        : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
    SKU                              : Premium
    Enabled For Deployment?          : False
    Enabled For Template Deployment? : False
    Enabled For Disk Encryption?     : False
    Soft Delete Enabled?             :
    Access Policies                  :
                                       Tenant ID                                  : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
                                       Object ID                                  : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx
                                       Application ID                             :
                                       Display Name                               : User Name (username@microsoft.com)
                                       Permissions to Keys                        : get, create, delete, list, update,
                                       import, backup, restore, recover
                                       Permissions to Secrets                     : get, list, set, delete, backup,
                                       restore, recover
                                       Permissions to Certificates                : get, delete, list, create, import,
                                       update, deleteissuers, getissuers, listissuers, managecontacts, manageissuers,
                                       setissuers, recover, backup, restore
                                       Permissions to (Key Vault Managed) Storage : delete, deletesas, get, getsas, list,
                                       listsas, regeneratekey, set, setsas, update, recover, backup, restore

    Tags                             :
  description: |-
    This command creates a key vault, just like the previous example. However, it specifies a value of
    Premium for the *SKU* parameter to create a Premium key vault.
  summary: ""
- title: Example 3
  code: |-
    PS C:\> $frontendSubnet = New-AzVirtualNetworkSubnetConfig -Name frontendSubnet -AddressPrefix "110.0.1.0/24" -ServiceEndpoint Microsoft.KeyVault
    PS C:\> $virtualNetwork = New-AzVirtualNetwork -Name myVNet -ResourceGroupName myRG -Location westus -AddressPrefix "110.0.0.0/16" -Subnet $frontendSubnet
    PS C:\> $myNetworkResId = (Get-AzVirtualNetwork -Name myVNet -ResourceGroupName myRG).Subnets[0].Id
    PS C:\> $ruleSet = New-AzKeyVaultNetworkRuleSetObject -DefaultAction Allow -Bypass AzureServices -IpAddressRange "110.0.1.0/24" -VirtualNetworkResourceId $myNetworkResId
    PS C:\> New-AzKeyVault -ResourceGroupName "myRg" -VaultName "myVault" -NetworkRuleSet $ruleSet
  description: |-
    Creating a key vault and specifies network rules to allow access to the specified IP address from the virtual network identified by $myNetworkResId. See `New-AzKeyVaultNetworkRuleSetObject` for more information.
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: None
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: DisableSoftDelete
  description: |+
    If specified, 'soft delete' functionality is disabled for this key vault.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: EnabledForDeployment
  description: |+
    Enables the Microsoft.Compute resource provider to retrieve secrets from this key vault when this
    key vault is referenced in resource creation, for example when creating a virtual machine.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: EnabledForDiskEncryption
  description: |+
    Enables the Azure disk encryption service to get secrets and unwrap keys from this key vault.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: EnabledForTemplateDeployment
  description: |+
    Enables Azure Resource Manager to get secrets from this key vault when this key vault is referenced in a template deployment.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: EnablePurgeProtection
  description: |+
    If specified, protection against immediate deletion is enabled for this vault; requires soft delete to be enabled as well.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: EnableRbacAuthorization
  description: |+
    If specified, enables to authorize data actions by Role Based Access Control (RBAC), and then the access policies specified in vault properties will be ignored. Note that management actions are always authorized with RBAC.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Location
  isRequired: true
  description: |+
    Specifies the Azure region in which to create the key vault. Use the command [Get-AzLocation](/powershell/module/az.resources/get-azlocation) to see your choices.

  defaultValue: None
  pipelineInput: true
  position: "2"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Specifies a name of the key vault to create. The name can be any combination of letters, digits, or hyphens. The name must start and end with a letter or digit. The name must be universally unique.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: VaultName
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.KeyVault.Models.PSKeyVaultNetworkRuleSet" data-throw-if-not-resolved="False" />
  name: NetworkRuleSet
  description: |+
    Specifies the network rule set of the vault. It governs the accessibility of the key vault from specific network locations. Created by `New-AzKeyVaultNetworkRuleSetObject`.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    Specifies the name of an existing resource group in which to create the key vault.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Management.KeyVault.Models.SkuName" data-throw-if-not-resolved="False" />
  name: Sku
  description: |+
    Specifies the SKU of the key vault instance. For information about which features are available for each SKU, see the Azure Key Vault Pricing website (https://go.microsoft.com/fwlink/?linkid=512521).

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: Standard, Premium
- type: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  name: SoftDeleteRetentionInDays
  description: |+
    Specifies how long deleted resources are retained, and how long until a vault or an object in the deleted state can be purged. The default is 90 days.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  name: Tag
  description: |+
    Key-value pairs in the form of a hash table. For example:
    @{key0="value0";key1=$null;key2="value2"}

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: Tags
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: None
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.KeyVault.New-AzKeyVault
name: New-AzKeyVault
description: |-
  The **New-AzKeyVault** cmdlet creates a key vault in the specified resource group. This cmdlet
  also grants permissions to the currently logged on user to add, remove, or list keys and secrets in
  the key vault.
  Note: If you see the error **The subscription is not registered to use namespace
  'Microsoft.KeyVault'** when you try to create your new key vault, run
  **Register-AzResourceProvider -ProviderNamespace "Microsoft.KeyVault"** and then rerun your
  **New-AzKeyVault** command. For more information, see Register-AzResourceProvider.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.KeyVault.dll-Help.xml
  Module Name: Az.KeyVault
  ms.assetid: 4C40DAC9-5C0B-4AFD-9BDB-D407E0B9F701
  online version: https://docs.microsoft.com/en-us/powershell/module/az.keyvault/new-azkeyvault
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/KeyVault/KeyVault/help/New-AzKeyVault.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/KeyVault/KeyVault/help/New-AzKeyVault.md
