### YamlMime:PowershellCmdlet
summary: |-
  Returns search results based on the specified parameters.
module: Az.OperationalInsights
notes: ""
inputs:
- name: <xref href="Microsoft.Azure.Commands.OperationalInsights.Models.PSWorkspace" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.OperationalInsights.Models.PSQueryResponse" data-throw-if-not-resolved="False" />
  description: ""
syntaxes:
- >-
  Invoke-AzOperationalInsightsQuery -WorkspaceId <String> -Query <String> [-Timespan <TimeSpan>] [-Wait <Int32>]

   [-IncludeRender] [-IncludeStatistics] [-AsJob] [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  Invoke-AzOperationalInsightsQuery -Workspace <PSWorkspace> -Query <String> [-Timespan <TimeSpan>]

   [-Wait <Int32>] [-IncludeRender] [-IncludeStatistics] [-AsJob] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
examples:
- title: 'Example 1: Get search results using a query'
  code: |-
    PS C:\> $queryResults = Invoke-AzOperationalInsightsQuery -WorkspaceId "63613592-b6f7-4c3d-a390-22ba13102111" -Query "union * | take 10"
    PS C:\> $queryResults.Results
    ...
  description: |-
    Once invoked, $queryResults.Results will contain all of the resulting rows from your query.
  summary: ""
- title: 'Example 2: Convert $results.Result IEnumerable to an array'
  code: |-
    PS C:\> $queryResults = Invoke-AzOperationalInsightsQuery -WorkspaceId "63613592-b6f7-4c3d-a390-22ba13102111" -Query "union * | take 10"
    PS C:\> $resultsArray = [System.Linq.Enumerable]::ToArray($queryResults.Results)
    ...
  description: |-
    Some queries can result in very large data sets being returned. Because of this, the default behavior of the cmdlet is to return an IEnumerable to reduce memory costs. If you'd prefer to have an array of results, you can use the LINQ Enumerable.ToArray() extension method to convert the IEnumerable to an array.
  summary: ""
- title: 'Example 3: Get search results using a query over a specific timeframe'
  code: |-
    PS C:\> $queryResults = Invoke-AzOperationalInsightsQuery -WorkspaceId "63613592-b6f7-4c3d-a390-22ba13102111" -Query "union * | take 10" -Timespan (New-TimeSpan -Hours 24)
    PS C:\> $queryResults.Results
    ...
  description: |-
    The results from this query will be limited to the past 24 hours.
  summary: ""
- title: 'Example 4: Include render & statistics in query result'
  code: |-
    PS C:\> $queryResults = Invoke-AzOperationalInsightsQuery -WorkspaceId "63613592-b6f7-4c3d-a390-22ba13102111" -Query "union * | take 10" -IncludeRender -IncludeStatistics
    PS C:\> $queryResults.Results
    ...
    PS C:\> $queryResults.Render
    ...
    PS C:\> $queryResults.Statistics
    ...
  description: |-
    See [https://dev.loganalytics.io/documentation/Using-the-API/RequestOptions](https://dev.loganalytics.io/documentation/Using-the-API/RequestOptions) for details on the render and statistics info.
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Run cmdlet in the background

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: IncludeRender
  description: |+
    If specified, rendering information for metric queries will be included in the response.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: IncludeStatistics
  description: |+
    If specified, query statistics will be included in the response.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Query
  isRequired: true
  description: |+
    The query to execute.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.TimeSpan" data-throw-if-not-resolved="False" /><span>]</span>
  name: Timespan
  description: |+
    The timespan to bound the query by.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32" data-throw-if-not-resolved="False" /><span>]</span>
  name: Wait
  description: |+
    Puts an upper bound on the amount of time the server will spend processing the query.
    See: https://dev.loganalytics.io/documentation/Using-the-API/Timeouts

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.OperationalInsights.Models.PSWorkspace" data-throw-if-not-resolved="False" />
  name: Workspace
  isRequired: true
  description: |+
    The workspace

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: WorkspaceId
  isRequired: true
  description: |+
    The workspace ID.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Az.OperationalInsights.Invoke-AzOperationalInsightsQuery
name: Invoke-AzOperationalInsightsQuery
description: |-
  The **Invoke-AzOperationalInsightsQuery** cmdlet returns the search results based on the specified parameters.
  You can access the status of the search in the Metadata property of the returned object.
  If the status is Pending, then the search has not completed, and the results will be from the archive.
  You can retrieve the results of the search from the Value property of the returned object.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.OperationalInsights.dll-Help.xml
  Module Name: Az.OperationalInsights
  online version: https://docs.microsoft.com/en-us/powershell/module/az.operationalinsights/invoke-azoperationalinsightsquery
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/OperationalInsights/OperationalInsights/help/Invoke-AzOperationalInsightsQuery.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/OperationalInsights/OperationalInsights/help/Invoke-AzOperationalInsightsQuery.md
