### YamlMime:PowershellCmdlet
summary: |-
  Adds a network security rule configuration to a network security group.
module: Az.Network
notes: ""
inputs:
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkSecurityGroup" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkSecurityGroup" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzNetworkSecurityRuleConfig
  href: ./Get-AzNetworkSecurityRuleConfig.yml
- text: New-AzNetworkSecurityRuleConfig
  href: ./New-AzNetworkSecurityRuleConfig.yml
- text: Remove-AzNetworkSecurityRuleConfig
  href: ./Remove-AzNetworkSecurityRuleConfig.yml
- text: Set-AzNetworkSecurityRuleConfig
  href: ./Set-AzNetworkSecurityRuleConfig.yml
syntaxes:
- >-
  Add-AzNetworkSecurityRuleConfig -Name <String> -NetworkSecurityGroup <PSNetworkSecurityGroup>

   [-Description <String>] [-Protocol <String>] [-SourcePortRange <String[]>] [-DestinationPortRange <String[]>]

   [-SourceAddressPrefix <String[]>] [-DestinationAddressPrefix <String[]>]

   [-SourceApplicationSecurityGroup <PSApplicationSecurityGroup[]>]

   [-DestinationApplicationSecurityGroup <PSApplicationSecurityGroup[]>] [-Access <String>] [-Priority <Int32>]

   [-Direction <String>] [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
- >-
  Add-AzNetworkSecurityRuleConfig -Name <String> -NetworkSecurityGroup <PSNetworkSecurityGroup>

   [-Description <String>] [-Protocol <String>] [-SourcePortRange <String[]>] [-DestinationPortRange <String[]>]

   [-SourceAddressPrefix <String[]>] [-DestinationAddressPrefix <String[]>]

   [-SourceApplicationSecurityGroupId <String[]>] [-DestinationApplicationSecurityGroupId <String[]>]

   [-Access <String>] [-Priority <Int32>] [-Direction <String>] [-DefaultProfile <IAzureContextContainer>]

   [<CommonParameters>]
examples:
- title: '1: Adding a network security group'
  code: |-
    Get-AzNetworkSecurityGroup -Name nsg1 -ResourceGroupName rg1 | 
    Add-AzNetworkSecurityRuleConfig -Name rdp-rule -Description "Allow RDP" -Access 
        Allow -Protocol Tcp -Direction Inbound -Priority 100 -SourceAddressPrefix Internet 
        -SourcePortRange * -DestinationAddressPrefix * -DestinationPortRange 3389 | 
        Set-AzNetworkSecurityGroup
  description: |-
    The first command retrieves an Azure network security group named "nsg1" from resource group "rg1". The second command adds a network security rule named "rdp-rule" that allows traffic from internet on port 3389 to the retrieved network security group object. Persists the modified Azure network security group.
  summary: ""
- title: '2: Adding a new security rule with application security groups'
  code: |-
    $srcAsg = New-AzApplicationSecurityGroup -ResourceGroupName MyResourceGroup -Name srcAsg -Location "West US"
    $destAsg = New-AzApplicationSecurityGroup -ResourceGroupName MyResourceGroup -Name destAsg -Location "West US"

    Get-AzNetworkSecurityGroup -Name nsg1 -ResourceGroupName rg1 |
    Add-AzNetworkSecurityRuleConfig -Name rdp-rule -Description "Allow RDP" -Access
        Allow -Protocol Tcp -Direction Inbound -Priority 100 -SourceApplicationSecurityGroup
        $srcAsg -SourcePortRange * -DestinationApplicationSecurityGroup $destAsg -DestinationPortRange 3389 |
    Set-AzNetworkSecurityGroup
  description: |-
    First, we create two new application security groups. Then, we retrieve an Azure network security group named "nsg1" from resource group "rg1". and add a network security rule named "rdp-rule" to it. The rule allows traffic from all the IP configurations in the application security group "srcAsg" to all the IP configurations in "destAsg" on port 3389. After adding the rule, we persist the modified Azure network security group.
  summary: ""
parameters:
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Access
  description: |+
    Specifies whether network traffic is allowed or denied.
    The acceptable values for this parameter are: Allow and Deny.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Allow, Deny
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Description
  description: |+
    Specifies a description of a network security rule configuration.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DestinationAddressPrefix
  description: |+
    Specifies a destination address prefix.
    The acceptable values for this parameter are:
    - A Classless Interdomain Routing (CIDR) address
    - A destination IP address range
    - A wildcard character (*) to match any IP address
    You can use tags such as VirtualNetwork, AzureLoadBalancer, and Internet.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSApplicationSecurityGroup" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DestinationApplicationSecurityGroup
  description: |+
    The application security group set as destination for the rule. It cannot be used with 'DestinationAddressPrefix' parameter.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DestinationApplicationSecurityGroupId
  description: |+
    The application security group set as destination for the rule. It cannot be used with 'DestinationAddressPrefix' parameter.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DestinationPortRange
  description: |+
    Specifies a destination port or range.
    The acceptable values for this parameter are:
    - An integer
    - A range of integers between 0 and 65535
    - A wildcard character (*) to match any port

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Direction
  description: |+
    Specifies whether a rule is evaluated on incoming or outgoing traffic.
    The acceptable values for this parameter are: Inbound and Outbound.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Inbound, Outbound
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Specifies the name of a network security rule configuration.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSNetworkSecurityGroup" data-throw-if-not-resolved="False" />
  name: NetworkSecurityGroup
  isRequired: true
  description: |+
    Specifies a **NetworkSecurityGroup** object.
    This cmdlet adds a network security rule configuration to the object that this parameter specifies.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Int32" data-throw-if-not-resolved="False" />
  name: Priority
  description: |+
    Specifies the priority of a rule configuration.
    The acceptable values for this parameter are: An integer between 100 and 4096.
    The priority number must be unique for each rule in the collection.
    The lower the priority number, the higher the priority of the rule.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Protocol
  description: |+
    Specifies the network protocol that a rule configuration applies to.
    The acceptable values for this parameter are:
    - Tcp
    - Udp
    - Wildcard character (*) to match both

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Tcp, Udp, *
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: SourceAddressPrefix
  description: |+
    Specifies a source address prefix.
    The acceptable values for this parameter are:
    - A CIDR
    - A source IP range
    - A wildcard character (*) to match any IP address.
    You can also use tags such as VirtualNetwork, AzureLoadBalancer and Internet.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Network.Models.PSApplicationSecurityGroup" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: SourceApplicationSecurityGroup
  description: |+
    The application security group set as source for the rule. It cannot be used with 'SourceAddressPrefix' parameter.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: SourceApplicationSecurityGroupId
  description: |+
    The application security group set as source for the rule. It cannot be used with 'SourceAddressPrefix' parameter.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: SourcePortRange
  description: |+
    Specifies a source port or range.
    This value is expressed as an integer, as a range between 0 and 65535, or as a wildcard character (*) to match any source port.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Az.Network.Add-AzNetworkSecurityRuleConfig
name: Add-AzNetworkSecurityRuleConfig
description: |-
  The **Add-AzNetworkSecurityRuleConfig** cmdlet adds a network security rule configuration to an Azure network security group.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Network.dll-Help.xml
  Module Name: Az.Network
  ms.assetid: 9160A21D-0F83-415B-830B-F35C8B863E90
  online version: https://docs.microsoft.com/en-us/powershell/module/az.network/add-aznetworksecurityruleconfig
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Network/Network/help/Add-AzNetworkSecurityRuleConfig.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Network/Network/help/Add-AzNetworkSecurityRuleConfig.md
