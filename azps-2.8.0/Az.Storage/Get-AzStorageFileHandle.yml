### YamlMime:PowershellCmdlet
summary: |-
  Lists file handles of a file share, a file directory or a file.
module: Az.Storage
notes: ""
inputs:
- name: <xref href="Microsoft.Azure.Storage.File.CloudFileShare" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Storage.File.CloudFileDirectory" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.IStorageContext" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Storage.File.FileHandleResultSegment" data-throw-if-not-resolved="False" />
  description: ""
syntaxes:
- >-
  Get-AzStorageFileHandle [-ShareName] <String> [[-Path] <String>] [-Recursive] [-Context <IStorageContext>]

   [-ServerTimeoutPerRequest <Int32>] [-ClientTimeoutPerRequest <Int32>]

   [-DefaultProfile <IAzureContextContainer>] [-ConcurrentTaskCount <Int32>] [-IncludeTotalCount]

   [-Skip <UInt64>] [-First <UInt64>] [<CommonParameters>]
- >-
  Get-AzStorageFileHandle [-Share] <CloudFileShare> [[-Path] <String>] [-Recursive]

   [-ServerTimeoutPerRequest <Int32>] [-ClientTimeoutPerRequest <Int32>]

   [-DefaultProfile <IAzureContextContainer>] [-ConcurrentTaskCount <Int32>] [-IncludeTotalCount]

   [-Skip <UInt64>] [-First <UInt64>] [<CommonParameters>]
- >-
  Get-AzStorageFileHandle [-Directory] <CloudFileDirectory> [[-Path] <String>] [-Recursive]

   [-ServerTimeoutPerRequest <Int32>] [-ClientTimeoutPerRequest <Int32>]

   [-DefaultProfile <IAzureContextContainer>] [-ConcurrentTaskCount <Int32>] [-IncludeTotalCount]

   [-Skip <UInt64>] [-First <UInt64>] [<CommonParameters>]
- >-
  Get-AzStorageFileHandle [-File] <CloudFile> [-Recursive] [-ServerTimeoutPerRequest <Int32>]

   [-ClientTimeoutPerRequest <Int32>] [-DefaultProfile <IAzureContextContainer>] [-ConcurrentTaskCount <Int32>]

   [-IncludeTotalCount] [-Skip <UInt64>] [-First <UInt64>] [<CommonParameters>]
examples:
- title: 'Example 1: List all file handles on a file share recursively, and sort by ClientIp and OpenTime'
  code: |-
    PS C:\>Get-AzStorageFileHandle -ShareName "mysharename" -Recursive | Sort-Object ClientIP,OpenTime 

    HandleId    Path                  ClientIp       ClientPort OpenTime             LastReconnectTime FileId               ParentId             SessionId          
    --------    ----                  --------       ---------- --------             ----------------- ------               --------             ---------          
    28506980357                       104.46.105.229 49805      2019-07-29 08:37:36Z                   0                    0                    9297571480349046273
    28506980537 dir1                  104.46.105.229 49805      2019-07-30 09:28:48Z                   10376363910205800448 0                    9297571480349046273
    28506980538 dir1                  104.46.105.229 49805      2019-07-30 09:28:48Z                   10376363910205800448 0                    9297571480349046273
    28582543365                       104.46.119.170 51675      2019-07-30 09:29:32Z                   0                    0                    9477733061320772929
    28582543375 dir1                  104.46.119.170 51675      2019-07-30 09:29:38Z                   10376363910205800448 0                    9477733061320772929
    28582543376 dir1                  104.46.119.170 51675      2019-07-30 09:29:38Z                   10376363910205800448 0                    9477733061320772929
  description: |-
    This command lists file handles on a file share, and sort the output by ClientIp, then by OpenTime.
  summary: ""
- title: 'Example 2: List first 2 file handles on a file directory recursively'
  code: |-
    PS C:\>Get-AzStorageFileHandle -ShareName "mysharename" -Path 'dir1/dir2'  -Recursive -First 2

    HandleId    Path      ClientIp       ClientPort OpenTime             LastReconnectTime FileId               ParentId             SessionId          
    --------    ----      --------       ---------- --------             ----------------- ------               --------             ---------          
    24057151779 dir1/dir2 104.46.105.229 50861      2019-06-18 07:39:23Z                   16140971433240035328 11529285414812647424 9549812641162070049
    24057151780 dir1/dir2 104.46.105.229 50861      2019-06-18 07:39:23Z                   16140971433240035328 11529285414812647424 9549812641162070049
  description: |-
    This command lists first 2 file handles on a file directory recursively .
  summary: ""
- title: 'Example 3: List the 3rd to the 6th file handles on a file'
  code: |-
    PS C:\>Get-AzStorageFileHandle -ShareName "mysharename" -Path 'dir1/dir2/test.txt' -skip 2 -First 4 

    HandleId    Path               ClientIp       ClientPort OpenTime             LastReconnectTime FileId              ParentId             SessionId          
    --------    ----               --------       ---------- --------             ----------------- ------              --------             ---------          
    24055513248 dir1/dir2/test.txt 104.46.105.229 49817      2019-06-18 08:21:59Z                   9223407221226864640 16140971433240035328 9338416139169958321
    24055513249 dir1/dir2/test.txt 104.46.105.229 49817      2019-06-18 08:21:59Z                   9223407221226864640 16140971433240035328 9338416139169958321
    24055513252 dir1/dir2/test.txt 104.46.105.229 49964      2019-06-18 08:22:54Z                   9223407221226864640 16140971433240035328 9338416138431762125
    24055513253 dir1/dir2/test.txt 104.46.105.229 49964      2019-06-18 08:22:54Z                   9223407221226864640 16140971433240035328 9338416138431762125
  description: |-
    This command lists the 3rd to the 6th file handles on a file.
  summary: ""
parameters:
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32" data-throw-if-not-resolved="False" /><span>]</span>
  name: ClientTimeoutPerRequest
  description: |+
    The client side maximum execution time for each request in seconds.

  defaultValue: None
  position: Named
  aliases: ClientTimeoutPerRequestInSeconds
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32" data-throw-if-not-resolved="False" /><span>]</span>
  name: ConcurrentTaskCount
  description: |+
    The total amount of concurrent async tasks.
    The default value is 10.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.IStorageContext" data-throw-if-not-resolved="False" />
  name: Context
  description: |+
    Azure Storage Context Object

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Storage.File.CloudFileDirectory" data-throw-if-not-resolved="False" />
  name: Directory
  isRequired: true
  description: |+
    CloudFileDirectory object indicated the base folder where the files/directories would be listed.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Storage.File.CloudFile" data-throw-if-not-resolved="False" />
  name: File
  isRequired: true
  description: |+
    CloudFile object indicated the file to list File Handles.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.UInt64" data-throw-if-not-resolved="False" />
  name: First
  description: |+
    Gets only the first 'n' objects.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: IncludeTotalCount
  description: |+
    Reports the number of objects in the data set (an integer) followed by the objects. If the cmdlet cannot determine the total count, it returns 'Unknown total count'.
    Currently, this parameter does nothing.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Path
  description: |+
    Path to an existing file/directory.

  defaultValue: None
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Recursive
  description: |+
    List handles Recursively.
    Only works on File Directory.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Int32" data-throw-if-not-resolved="False" /><span>]</span>
  name: ServerTimeoutPerRequest
  description: |+
    The server time out for each request in seconds.

  defaultValue: None
  position: Named
  aliases: ServerTimeoutPerRequestInSeconds
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Storage.File.CloudFileShare" data-throw-if-not-resolved="False" />
  name: Share
  isRequired: true
  description: |+
    CloudFileShare object indicated the share where the files/directories would be listed.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ShareName
  isRequired: true
  description: |+
    Name of the file share where the files/directories would be listed.

  defaultValue: None
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.UInt64" data-throw-if-not-resolved="False" />
  name: Skip
  description: |+
    Ignores the first 'n' objects and then gets the remaining objects.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Az.Storage.Get-AzStorageFileHandle
name: Get-AzStorageFileHandle
description: |-
  The **Get-AzStorageFileHandle** cmdlet lists file handles of a  file share, or file directory or a file.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Storage.dll-Help.xml
  Module Name: Az.Storage
  online version: https://docs.microsoft.com/en-us/powershell/module/az.storage/get-azstoragefilehandle
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Storage/Storage.Management/help/Get-AzStorageFileHandle.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Storage/Storage.Management/help/Get-AzStorageFileHandle.md
