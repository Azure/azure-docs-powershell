### YamlMime:PowershellCmdlet
summary: |-
  Creates a Storage account.
module: Az.Storage
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Management.Storage.Models.PSStorageAccount" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzStorageAccount
  href: ./Get-AzStorageAccount.yml
- text: Remove-AzStorageAccount
  href: ./Remove-AzStorageAccount.yml
- text: Set-AzStorageAccount
  href: ./Set-AzStorageAccount.yml
syntaxes:
- >-
  New-AzStorageAccount [-ResourceGroupName] <String> [-Name] <String> [-SkuName] <String> [-Location] <String>

   [-Kind <String>] [-AccessTier <String>] [-CustomDomainName <String>] [-UseSubDomain <Boolean>]

   [-Tag <Hashtable>] [-EnableHttpsTrafficOnly <Boolean>] [-AssignIdentity] [-NetworkRuleSet <PSNetworkRuleSet>]

   [-EnableHierarchicalNamespace <Boolean>] [-EnableAzureActiveDirectoryDomainServicesForFile <Boolean>] [-AsJob]

   [-DefaultProfile <IAzureContextContainer>] [<CommonParameters>]
examples:
- title: 'Example 1: Create a Storage account'
  code: |-
    PS C:\>New-AzStorageAccount -ResourceGroupName MyResourceGroup -AccountName mystorageaccount -Location westus -SkuName Standard_GRS
  description: |-
    This command creates a Storage account for the resource group name MyResourceGroup.
  summary: ""
- title: 'Example 2: Create a Blob Storage account with BlobStorage Kind and hot AccessTier'
  code: |-
    PS C:\>New-AzStorageAccount -ResourceGroupName MyResourceGroup -AccountName mystorageaccount -Location westus -SkuName Standard_GRS -Kind BlobStorage -AccessTier Hot
  description: |-
    This command creates a Blob Storage account that with BlobStorage Kind and hot AccessTier
  summary: ""
- title: 'Example 3: Create a Storage account with Kind StorageV2, and Generate and Assign an Identity for Azure KeyVault.'
  code: |-
    PS C:\>New-AzStorageAccount -ResourceGroupName MyResourceGroup -AccountName mystorageaccount -Location westus -SkuName Standard_GRS -Kind StorageV2 -AssignIdentity
  description: |-
    This command creates a Storage account with Kind StorageV2.  It also generates and assigns an identity that can be used to manage account keys through Azure KeyVault.
  summary: ""
- title: 'Example 4: Create a Storage account with NetworkRuleSet from JSON'
  code: |-
    PS C:\>New-AzStorageAccount -ResourceGroupName MyResourceGroup -AccountName mystorageaccount -Location westus -Type Standard_LRS -NetworkRuleSet (@{bypass="Logging,Metrics";
        ipRules=(@{IPAddressOrRange="20.11.0.0/16";Action="allow"},
                @{IPAddressOrRange="10.0.0.0/7";Action="allow"});
        virtualNetworkRules=(@{VirtualNetworkResourceId="/subscriptions/s1/resourceGroups/g1/providers/Microsoft.Network/virtualNetworks/vnet1/subnets/subnet1";Action="allow"},
                            @{VirtualNetworkResourceId="/subscriptions/s1/resourceGroups/g1/providers/Microsoft.Network/virtualNetworks/vnet2/subnets/subnet2";Action="allow"});
        defaultAction="Deny"})
  description: |-
    This command creates a Storage account that has NetworkRuleSet property from JSON
  summary: ""
- title: 'Example 5: Create a Storage account with Hierarchical Namespace enabled.'
  code: |-
    PS C:\>New-AzStorageAccount -ResourceGroupName "MyResourceGroup" -AccountName "mystorageaccount" -Location "US West" -SkuName "Standard_GRS" -Kind StorageV2  -EnableHierarchicalNamespace $true
  description: |-
    This command creates a Storage account with Hierarchical Namespace enabled.
  summary: ""
- title: 'Example 6: Create a Storage account with Azure Files AAD DS Authentication.'
  code: |-
    PS C:\>New-AzStorageAccount -ResourceGroupName "MyResourceGroup" -AccountName "mystorageaccount" -Location "eastus2euap" -SkuName "Standard_LRS" -Kind StorageV2  -EnableAzureActiveDirectoryDomainServicesForFile $true
  description: |-
    This command creates a Storage account with Azure Files AAD DS Authentication.
  summary: ""
parameters:
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: AccessTier
  description: |+
    Specifies the access tier of the Storage account that this cmdlet creates.
    The acceptable values for this parameter are: Hot and Cool.
    If you specify a value of BlobStorage for the *Kind* parameter, you must specify a value for the
    *AccessTier* parameter. If you specify a value of Storage for this *Kind* parameter, do not specify
    the *AccessTier* parameter.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Hot, Cool
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AsJob
  description: |+
    Run cmdlet in the background

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: AssignIdentity
  description: |+
    Generate and assign a new Storage account Identity for this Storage account for use with key management services like Azure KeyVault.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: CustomDomainName
  description: |+
    Specifies the name of the custom domain of the Storage account.
    The default value is Storage.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with Azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.Boolean" data-throw-if-not-resolved="False" />
  name: EnableAzureActiveDirectoryDomainServicesForFile
  description: |+
    Enable Azure Files Azure Active Directory Domain Service Authentication for the storage account.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Boolean" data-throw-if-not-resolved="False" />
  name: EnableHierarchicalNamespace
  description: |+
    Indicates whether or not the Storage account enables Hierarchical Namespace.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Boolean" data-throw-if-not-resolved="False" />
  name: EnableHttpsTrafficOnly
  description: |+
    Indicates whether or not the Storage account only enables HTTPS traffic.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Kind
  description: |+
    Specifies the kind of Storage account that this cmdlet creates.
    The acceptable values for this parameter are:
    - Storage. General purpose Storage account that supports storage of Blobs, Tables, Queues, Files and Disks.
    - StorageV2. General Purpose Version 2 (GPv2) Storage account that supports Blobs, Tables, Queues, Files, and Disks, with advanced features like data tiering.
    - BlobStorage. Blob Storage account which supports storage of Blobs only.
    - BlockBlobStorage. Block Blob Storage account which supports storage of Block Blobs only.
    - FileStorage. File Storage account which supports storage of Files only.
    The default value is StorageV2.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: Storage, StorageV2, BlobStorage, BlockBlobStorage, FileStorage
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Location
  isRequired: true
  description: |+
    Specifies the location of the Storage account to create.

  defaultValue: None
  pipelineInput: true
  position: "3"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Name
  isRequired: true
  description: |+
    Specifies the name of the Storage account to create.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: StorageAccountName, AccountName
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Management.Storage.Models.PSNetworkRuleSet" data-throw-if-not-resolved="False" />
  name: NetworkRuleSet
  description: |+
    NetworkRuleSet is used to define a set of configuration rules for firewalls and virtual networks, as well as to set values for network properties such as services allowed to bypass the rules and how to handle requests that don't match any of the defined rules.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ResourceGroupName
  isRequired: true
  description: |+
    Specifies the name of the resource group in which to add the Storage account.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: SkuName
  isRequired: true
  description: |+
    Specifies the SKU name of the Storage account that this cmdlet creates.
    The acceptable values for this parameter are:
    - Standard_LRS. Locally-redundant storage.
    - Standard_ZRS. Zone-redundant storage.
    - Standard_GRS. Geo-redundant storage.
    - Standard_RAGRS. Read access geo-redundant storage.
    - Premium_LRS. Premium locally-redundant storage.
    - Premium_ZRS. Premium zone-redundant storage.

  defaultValue: None
  pipelineInput: true
  position: "2"
  aliases: StorageAccountType, AccountType, Type
  parameterValueGroup: Standard_LRS, Standard_ZRS, Standard_GRS, Standard_RAGRS, Premium_LRS, Premium_ZRS
- type: <xref href="System.Collections.Hashtable" data-throw-if-not-resolved="False" />
  name: Tag
  description: |+
    Key-value pairs in the form of a hash table set as tags on the server. For example:
    @{key0="value0";key1=$null;key2="value2"}

  defaultValue: None
  position: Named
  aliases: Tags
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="System.Boolean" data-throw-if-not-resolved="False" /><span>]</span>
  name: UseSubDomain
  description: |+
    Indicates whether to enable indirect CName validation.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: Az.Storage.New-AzStorageAccount
name: New-AzStorageAccount
description: |-
  The **New-AzStorageAccount** cmdlet creates an Azure Storage account.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Storage.Management.dll-Help.xml
  Module Name: Az.Storage
  ms.assetid: A3DA1205-B8FB-4B4C-9C40-AD303D038EDF
  online version: https://docs.microsoft.com/en-us/powershell/module/az.storage/new-azstorageaccount
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Storage/Storage.Management/help/New-AzStorageAccount.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Storage/Storage.Management/help/New-AzStorageAccount.md
