### YamlMime:PowershellCmdlet
summary: |-
  Adds a credential to an existing service principal.
module: Az.Resources
notes: ""
inputs:
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.ActiveDirectory.PSADServicePrincipal" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.DateTime" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.ActiveDirectory.PSADCredential" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="Microsoft.Azure.Commands.Resources.Models.Authorization.PSADCredentialWrapper" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzADSpCredential
  href: ./Get-AzADSpCredential.yml
- text: Remove-AzADSpCredential
  href: ./Remove-AzADSpCredential.yml
- text: Get-AzADServicePrincipal
  href: ./Get-AzADServicePrincipal.yml
syntaxes:
- >-
  New-AzADSpCredential -ObjectId <String> [-StartDate <DateTime>] [-EndDate <DateTime>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzADSpCredential -ObjectId <String> -CertValue <String> [-StartDate <DateTime>] [-EndDate <DateTime>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzADSpCredential -ServicePrincipalName <String> -CertValue <String> [-StartDate <DateTime>]

   [-EndDate <DateTime>] [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzADSpCredential -ServicePrincipalName <String> [-StartDate <DateTime>] [-EndDate <DateTime>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzADSpCredential -ServicePrincipalObject <PSADServicePrincipal> -CertValue <String> [-StartDate <DateTime>]

   [-EndDate <DateTime>] [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
- >-
  New-AzADSpCredential -ServicePrincipalObject <PSADServicePrincipal> [-StartDate <DateTime>]

   [-EndDate <DateTime>] [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
examples:
- title: Example 1 - Create a new service principal credential using a generated password
  code: |-
    PS C:\> New-AzADSpCredential -ObjectId 1f99cf81-0146-4f4e-beae-2007d0668476

    Secret    : System.Security.SecureString
    StartDate : 11/12/2018 9:36:05 PM
    EndDate   : 11/12/2019 9:36:05 PM
    KeyId     : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
    Type      : Password
  description: |-
    A new password credential is added to the existing service principal with object id '1f99cf81-0146-4f4e-beae-2007d0668476'.
  summary: ""
- title: Example 2 - Create a new service principal credential using a certificate
  code: |-
    PS C:\> $cer = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2
    PS C:\> $cer.Import("C:\myapp.cer")
    PS C:\> $binCert = $cer.GetRawCertData()
    PS C:\> $credValue = [System.Convert]::ToBase64String($binCert)
    PS C:\> New-AzADSpCredential -ServicePrincipalName "http://test123" -CertValue $credValue -StartDate $cer.NotBefore -EndDate $cer.NotAfter
  description: |-
    The supplied base64 encoded public X509 certificate ("myapp.cer") is added to the existing service principal using its SPN.
  summary: ""
- title: Example 3 - Create a new service principal credential using piping
  code: |-
    PS C:\> Get-AzADServicePrincipal -ObjectId 1f99cf81-0146-4f4e-beae-2007d0668476 | New-AzADSpCredential

    Secret    : System.Security.SecureString
    StartDate : 11/12/2018 9:36:05 PM
    EndDate   : 11/12/2019 9:36:05 PM
    KeyId     : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
    Type      : Password
  description: |-
    Gets the service principal with object id '1f99cf81-0146-4f4e-beae-2007d0668476' and pipes that to the New-AzADSpCredential to create a new service principal credential for that service principal with a generated password.
  summary: ""
parameters:
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: CertValue
  isRequired: true
  description: |+
    The value of the "asymmetric" credential type.
    It represents the base 64 encoded certificate.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: None
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.DateTime" data-throw-if-not-resolved="False" />
  name: EndDate
  description: |+
    The effective end date of the credential usage.
    The default end date value is one year from today.
    For an "asymmetric" type credential, this must be set to on or before the date that the X509 certificate is valid.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ObjectId
  isRequired: true
  description: |+
    The object id of the service principal to add the credentials to.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ServicePrincipalObjectId
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ServicePrincipalName
  isRequired: true
  description: |+
    The name (SPN) of the service principal to add the credentials to.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: SPN
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.ActiveDirectory.PSADServicePrincipal" data-throw-if-not-resolved="False" />
  name: ServicePrincipalObject
  isRequired: true
  description: |+
    The service principal object to add the credentials to.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.DateTime" data-throw-if-not-resolved="False" />
  name: StartDate
  description: |+
    The effective start date of the credential usage.
    The default start date value is today.
    For an "asymmetric" type credential, this must be set to on or after the date that the X509 certificate is valid from.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs.
    The cmdlet is not run.

  defaultValue: None
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.Resources.New-AzADSpCredential
name: New-AzADSpCredential
description: |-
  The New-AzADSpCredential cmdlet can be used to add a new credential or to roll credentials for a service principal.
  The service principal is identified by supplying either the object id or service principal name.
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Resources.dll-Help.xml
  Module Name: Az.Resources
  ms.assetid: 063BAA79-484D-48CF-9170-3808813752BD
  online version: https://docs.microsoft.com/en-us/powershell/module/az.resources/new-azadspcredential
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Resources/Resources/help/New-AzADSpCredential.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Resources/Resources/help/New-AzADSpCredential.md
