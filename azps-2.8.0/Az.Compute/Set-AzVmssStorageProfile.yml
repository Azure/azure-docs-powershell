### YamlMime:PowershellCmdlet
summary: |-
  Sets the storage profile properties for the VMSS.
module: Az.Compute
notes: ""
inputs:
- name: <xref href="Microsoft.Azure.Commands.Compute.Automation.Models.PSVirtualMachineScaleSet" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.String" data-throw-if-not-resolved="False" />
  description: ""
- name: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="" data-throw-if-not-resolved="False" /><span>[</span><xref href="Microsoft.Azure.Management.Compute.Models.CachingTypes, Microsoft.Azure.Management.Compute, Version=23.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" data-throw-if-not-resolved="False" /><span>]</span><span>]</span>
  description: ""
- name: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="" data-throw-if-not-resolved="False" /><span>[</span><xref href="Microsoft.Azure.Management.Compute.Models.OperatingSystemTypes, Microsoft.Azure.Management.Compute, Version=23.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" data-throw-if-not-resolved="False" /><span>]</span><span>]</span>
  description: ""
- name: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  description: ""
- name: <xref href="Microsoft.Azure.Management.Compute.Models.VirtualMachineScaleSetDataDisk" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  description: ""
outputs:
- name: <xref href="Microsoft.Azure.Commands.Compute.Automation.Models.PSVirtualMachineScaleSet" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AzVMImageOffer
  href: ./Get-AzVMImageOffer.yml
- text: Get-AzVMImagePublisher
  href: ./Get-AzVMImagePublisher.yml
- text: Get-AzVMImageSku
  href: ./Get-AzVMImageSku.yml
- text: New-AzVmssConfig
  href: ./New-AzVmssConfig.yml
syntaxes:
- >-
  Set-AzVmssStorageProfile [-VirtualMachineScaleSet] <PSVirtualMachineScaleSet>

   [[-ImageReferencePublisher] <String>] [[-ImageReferenceOffer] <String>] [[-ImageReferenceSku] <String>]

   [[-ImageReferenceVersion] <String>] [[-OsDiskName] <String>] [[-OsDiskCaching] <CachingTypes>]

   [[-OsDiskCreateOption] <String>] [[-OsDiskOsType] <OperatingSystemTypes>] [[-Image] <String>]

   [[-VhdContainer] <String[]>] [-ImageReferenceId <String>] [-OsDiskWriteAccelerator]

   [-DiffDiskSetting <String>] [-ManagedDisk <String>] [-DataDisk <VirtualMachineScaleSetDataDisk[]>]

   [-DefaultProfile <IAzureContextContainer>] [-WhatIf] [-Confirm] [<CommonParameters>]
examples:
- title: 'Example 1: Set the storage profile properties for the VMSS'
  code: |-
    PS C:\> Set-AzVmssStorageProfile -VirtualMachineScaleSet "ContosoVMSS" -Name "Test" -OsDiskCreateOption "FromImage" -OsDiskCaching "None" `
                -ImageReferenceOffer $ImgRef.Offer -ImageReferenceSku $ImgRef.Skus -ImageReferenceVersion $ImgRef.Version `
                -ImageReferencePublisher $ImgRef.PublisherName -VhdContainer $VhdContainer
  description: |-
    This command sets the storage profile properties for the VMSS named ContosoVMSS.
  summary: ""
parameters:
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before running the cmdlet.

  defaultValue: None
  position: Named
  aliases: cf
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Management.Compute.Models.VirtualMachineScaleSetDataDisk" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: DataDisk
  description: |+
    Specifies the data disk object.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Common.Authentication.Abstractions.Core.IAzureContextContainer" data-throw-if-not-resolved="False" />
  name: DefaultProfile
  description: |+
    The credentials, account, tenant, and subscription used for communication with azure.

  defaultValue: None
  position: Named
  aliases: AzContext, AzureRmContext, AzureCredential
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: DiffDiskSetting
  description: |+
    Specifies the differencing disk settings for operating system disk.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: Image
  description: |+
    Specifies the blob URI for the user image.
    VMSS creates an operating system disk in the same container of the user image.

  defaultValue: None
  pipelineInput: true
  position: "9"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ImageReferenceId
  description: |+
    Specifies the image reference ID.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ImageReferenceOffer
  description: |+
    Specifies the type of virtual machine image (VMImage) offer.
    To obtain an image offer, use the Get-AzVMImageOffer cmdlet.

  defaultValue: None
  pipelineInput: true
  position: "2"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ImageReferencePublisher
  description: |+
    Specifies the name of a publisher of a VMImage.
    To obtain a publisher, use the Get-AzVMImagePublisher cmdlet.

  defaultValue: None
  pipelineInput: true
  position: "1"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ImageReferenceSku
  description: |+
    Specifies the VMImage SKU.
    To obtain SKUs, use the Get-AzVMImageSku cmdlet.

  defaultValue: None
  pipelineInput: true
  position: "3"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ImageReferenceVersion
  description: |+
    Specifies the version of the VMImage.
    To use the latest version, specify a value of latest instead of a particular version.

  defaultValue: None
  pipelineInput: true
  position: "4"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: ManagedDisk
  description: |+
    Specifies the managed disk.

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="Microsoft.Azure.Management.Compute.Models.CachingTypes" data-throw-if-not-resolved="False" /><span>]</span>
  name: OsDiskCaching
  description: |+
    Specifies the caching mode of the operating system disk. 
    The acceptable values for this parameter are:
    - ReadOnly
    - ReadWrite
    The default value is ReadWrite.
    If you change the caching value, the cmdlet will restart the virtual machine.
    This setting affects the consistency and performance of the disk.

  defaultValue: None
  pipelineInput: true
  position: "6"
  aliases: ""
  parameterValueGroup: None, ReadOnly, ReadWrite
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: OsDiskCreateOption
  description: |+
    Specifies how this cmdlet creates the VMSS virtual machines.
    The acceptable values for this parameter are:
    - Attach : This value is used when you are using a specialized disk to create the VMSS virtual machine. 
    - FromImage : This value is used when you are using an image to create the VMSS virtual machine.
    If you are using a platform image, you will also use the *imageReference* parameter.

  defaultValue: None
  pipelineInput: true
  position: "7"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" />
  name: OsDiskName
  description: |+
    Specifies the name of the operating system disk.

  defaultValue: None
  pipelineInput: true
  position: "5"
  aliases: Name
  parameterValueGroup: ""
- type: <xref href="System.Nullable`1" data-throw-if-not-resolved="False" /><span>[</span><xref href="Microsoft.Azure.Management.Compute.Models.OperatingSystemTypes" data-throw-if-not-resolved="False" /><span>]</span>
  name: OsDiskOsType
  description: |+
    Specifies the type of operating system on the disk.
    This is only needed for user image scenarios and not for a platform image.

  defaultValue: None
  pipelineInput: true
  position: "8"
  aliases: ""
  parameterValueGroup: Windows, Linux
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: OsDiskWriteAccelerator
  description: |+
    Specifies whether WriteAccelerator should be enabled or disabled on the OS disk.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: VhdContainer
  description: |+
    Specifies the container URLs that are used to store operating system disks for the VMSS.

  defaultValue: None
  pipelineInput: true
  position: "10"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="Microsoft.Azure.Commands.Compute.Automation.Models.PSVirtualMachineScaleSet" data-throw-if-not-resolved="False" />
  name: VirtualMachineScaleSet
  isRequired: true
  description: |+
    Specifies the VMSS object.
    To obtain the object, use the New-AzVmssConfig object.

  defaultValue: None
  pipelineInput: true
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="System.Management.Automation.SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Shows what would happen if the cmdlet runs. The cmdlet is not run.

  defaultValue: None
  position: Named
  aliases: wi
  parameterValueGroup: ""
uid: Az.Compute.Set-AzVmssStorageProfile
name: Set-AzVmssStorageProfile
description: |-
  The **Set-AzVmssStorageProfile** cmdlet sets the storage profile properties for the Virtual Machine Scale Set (VMSS).
metadata:
  external help file: Microsoft.Azure.PowerShell.Cmdlets.Compute.dll-Help.xml
  Module Name: Az.Compute
  ms.assetid: 230DAE05-C197-451F-A24C-F4A2DAE4AD04
  online version: https://docs.microsoft.com/en-us/powershell/module/az.compute/set-azvmssstorageprofile
  schema: 2.0.0
  content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Compute/Compute/help/Set-AzVmssStorageProfile.md
  original_content_git_url: https://github.com/Azure/azure-powershell/blob/master/src/Compute/Compute/help/Set-AzVmssStorageProfile.md
